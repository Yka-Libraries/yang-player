/**
 * yang-player - a html5 video player by Sam Yang (https://yangkean.com)
 * @version v2.0.0
 * @link https://github.com/yangkean/YangPlayer/
 * @license see https://github.com/yangkean/YangPlayer/blob/2.0.0/LICENSE
 */
function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t,r){function n(t){if(e.event&&e.event.contentOverflow!==r)return{x:e.event.offsetX,y:e.event.offsetY};if(t.offsetX!==r&&t.offsetY!==r)return{x:t.offsetX,y:t.offsetY};var n=t.target.parentNode.parentNode;return{x:t.layerX-n.offsetLeft,y:t.layerY-n.offsetTop}}function o(e,r,n){e=t.createElementNS(g,e);for(var o in r)e.setAttribute(o,r[o]);"[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]);for(var i=0,a=n[0]&&n.length||0;i<a;i++)e.appendChild(n[i]);return e}function i(e){var t,r,n,o,i,a=e.h%360/60;i=e.v*e.s,o=i*(1-Math.abs(a%2-1)),t=r=n=e.v-i,a=~~a,t+=[i,o,0,0,o,i][a],r+=[o,i,i,o,0,0][a],n+=[0,0,o,i,i,o][a];var l=Math.floor(255*t),s=Math.floor(255*r),u=Math.floor(255*n);return{r:l,g:s,b:u,hex:"#"+(16777216|u|s<<8|l<<16).toString(16).slice(1)}}function a(e){var t=e.r,r=e.g,n=e.b;(e.r>1||e.g>1||e.b>1)&&(t/=255,r/=255,n/=255);var o,i,a,l;return a=Math.max(t,r,n),l=a-Math.min(t,r,n),o=0==l?null:a==t?(r-n)/l+(r<n?6:0):a==r?(n-t)/l+2:(t-r)/l+4,o=o%6*60,i=0==l?0:l/a,{h:o,s:i,v:a}}function l(t,o,a){return function(l){l=l||e.event;var s=n(l);t.h=s.y/o.offsetHeight*360+v,t.s=t.v=1;var u=i({h:t.h,s:1,v:1});a.style.backgroundColor=u.hex,t.callback&&t.callback(u.hex,{h:t.h-v,s:t.s,v:t.v},{r:u.r,g:u.g,b:u.b},r,s)}}function s(t,r){return function(o){o=o||e.event;var a=n(o),l=r.offsetWidth,s=r.offsetHeight;t.s=a.x/l,t.v=(s-a.y)/s;var u=i(t);t.callback&&t.callback(u.hex,{h:t.h-v,s:t.s,v:t.v},{r:u.r,g:u.g,b:u.b},a)}}function u(e,t,r){if(!(this instanceof u))return new u(e,t,r);if(this.h=0,this.s=1,this.v=1,r)this.callback=r,this.pickerElement=t,this.slideElement=e;else{var n=e;n.innerHTML=b,this.slideElement=n.getElementsByClassName("slide")[0],this.pickerElement=n.getElementsByClassName("picker")[0];var o=n.getElementsByClassName("slide-indicator")[0],i=n.getElementsByClassName("picker-indicator")[0];u.fixIndicators(o,i),this.callback=function(e,r,n,a,l){u.positionIndicators(o,i,l,a),t(e,r,n)}}if("SVG"==d){var a=y.cloneNode(!0),p=h.cloneNode(!0),v=a.getElementById("gradient-hsv"),g=a.getElementsByTagName("rect")[0];v.id="gradient-hsv-"+m,g.setAttribute("fill","url(#"+v.id+")");var w=[p.getElementById("gradient-black"),p.getElementById("gradient-white")],S=p.getElementsByTagName("rect");w[0].id="gradient-black-"+m,w[1].id="gradient-white-"+m,S[0].setAttribute("fill","url(#"+w[1].id+")"),S[1].setAttribute("fill","url(#"+w[0].id+")"),this.slideElement.appendChild(a),this.pickerElement.appendChild(p),m++}else this.slideElement.innerHTML=y,this.pickerElement.innerHTML=h;c(this.slideElement,"click",l(this,this.slideElement,this.pickerElement)),c(this.pickerElement,"click",s(this,this.pickerElement)),f(this,this.slideElement,l(this,this.slideElement,this.pickerElement)),f(this,this.pickerElement,s(this,this.pickerElement))}function c(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener&&e.addEventListener(t,r,!1)}function f(e,t,r){var n=!1;c(t,"mousedown",function(e){n=!0}),c(t,"mouseup",function(e){n=!1}),c(t,"mouseout",function(e){n=!1}),c(t,"mousemove",function(e){n&&r(e)})}function p(e,t,r,n){e.h=t.h%360,e.s=t.s,e.v=t.v;var o=i(e),a={y:e.h*e.slideElement.offsetHeight/360,x:0},l=e.pickerElement.offsetHeight,s={x:e.s*e.pickerElement.offsetWidth,y:l-e.v*l};return e.pickerElement.style.backgroundColor=i({h:e.h,s:1,v:1}).hex,e.callback&&e.callback(n||o.hex,{h:e.h,s:e.s,v:e.v},r||{r:o.r,g:o.g,b:o.b},s,a),e}var h,y,d=e.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",v=15,g="http://www.w3.org/2000/svg",b=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");"SVG"==d?(y=o("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[o("defs",{},o("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[o("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),o("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),o("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),o("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),o("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),o("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),o("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),o("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),o("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),o("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),h=o("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[o("defs",{},[o("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[o("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),o("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),o("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[o("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),o("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),o("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),o("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==d&&(y=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),h=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),t.namespaces.v||t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var m=0;u.hsv2rgb=function(e){var t=i(e);return delete t.hex,t},u.hsv2hex=function(e){return i(e).hex},u.rgb2hsv=a,u.rgb2hex=function(e){return i(a(e)).hex},u.hex2hsv=function(e){return a(u.hex2rgb(e))},u.hex2rgb=function(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},u.prototype.setHsv=function(e){return p(this,e)},u.prototype.setRgb=function(e){return p(this,a(e),e)},u.prototype.setHex=function(e){return p(this,u.hex2hsv(e),r,e)},u.positionIndicators=function(e,t,r,n){r&&(t.style.left="auto",t.style.right="0px",t.style.top="0px",e.style.top=r.y-e.offsetHeight/2+"px"),n&&(t.style.top=n.y-t.offsetHeight/2+"px",t.style.left=n.x-t.offsetWidth/2+"px")},u.fixIndicators=function(e,t){t.style.pointerEvents="none",e.style.pointerEvents="none"},e.ColorPicker=u}(window,window.document),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){"use strict";var e,t=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),n=Array.isArray,o=Object.keys,i=function(e){return function(){return!t(e,this,arguments)}},a=function(e){try{return e(),!1}catch(e){return!0}},l=function(e){try{return e()}catch(e){return!1}},s=i(a),u=function(){return!a(function(){Object.defineProperty({},"x",{get:function(){}})})},c=!!Object.defineProperty&&u(),f="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),h=Function.call.bind(Array.prototype.reduce),y=Function.call.bind(Array.prototype.filter),d=Function.call.bind(Array.prototype.some),v=function(e,t,r,n){!n&&t in e||(c?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r}):e[t]=r)},g=function(e,t,r){p(o(t),function(n){var o=t[n];v(e,n,o,!!r)})},b=Function.call.bind(Object.prototype.toString),m="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===b(e)}:function(e){return"function"==typeof e},w={getter:function(e,t,r){if(!c)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:r})},proxy:function(e,t,r){if(!c)throw new TypeError("getters require true ES5 support");var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function(){return e[t]},set:function(r){e[t]=r}})},redefine:function(e,t,r){if(c){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r,Object.defineProperty(e,t,n)}else e[t]=r},defineByDescriptor:function(e,t,r){c?Object.defineProperty(e,t,r):"value"in r&&(e[t]=r.value)},preserveToString:function(e,t){t&&m(t.toString)&&v(e,"toString",t.toString.bind(t),!0)}},S=Object.create||function(e,t){var r=function(){};r.prototype=e;var n=new r;return"undefined"!=typeof t&&o(t).forEach(function(e){w.defineByDescriptor(n,e,t[e])}),n},O=function(e,t){return!!Object.setPrototypeOf&&l(function(){var r=function t(r){var n=new e(r);return Object.setPrototypeOf(n,t.prototype),n};return Object.setPrototypeOf(r,e),r.prototype=S(e.prototype,{constructor:{value:r}}),t(r)})},C=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")},P=C(),k=P.isFinite,j=Function.call.bind(String.prototype.indexOf),B=Function.apply.bind(Array.prototype.indexOf),I=Function.call.bind(Array.prototype.concat),E=Function.call.bind(String.prototype.slice),T=Function.call.bind(Array.prototype.push),x=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),_=Math.max,N=Math.min,R=Math.floor,A=Math.abs,F=Math.exp,D=Math.log,V=Math.sqrt,Y=Function.call.bind(Object.prototype.hasOwnProperty),L=function(){},W=P.Map,H=W&&W.prototype.delete,z=W&&W.prototype.get,q=W&&W.prototype.has,G=W&&W.prototype.set,X=P.Symbol||{},U=X.species||"@@species",$=Number.isNaN||function(e){return e!==e},J=Number.isFinite||function(e){return"number"==typeof e&&k(e)},Z=m(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:$(t)?t:t<0?-1:1},K=function(e){return"[object Arguments]"===b(e)},Q=function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==b(e)&&"[object Function]"===b(e.callee)},ee=K(arguments)?K:Q,te={primitive:function(e){return null===e||"function"!=typeof e&&"object"!=typeof e},string:function(e){return"[object String]"===b(e)},regex:function(e){return"[object RegExp]"===b(e)},symbol:function(e){return"function"==typeof P.Symbol&&"symbol"==typeof e}},re=function(e,t,r){var n=e[t];v(e,t,r,!0),w.preserveToString(e[t],n)},ne="function"==typeof X&&"function"==typeof X.for&&te.symbol(X()),oe=te.symbol(X.iterator)?X.iterator:"_es6-shim iterator_";P.Set&&"function"==typeof(new P.Set)["@@iterator"]&&(oe="@@iterator"),P.Reflect||v(P,"Reflect",{},!0);var ie=P.Reflect,ae=String,le="undefined"!=typeof document&&document?document.all:null,se=null==le?function(e){return null==e}:function(e){return null==e&&e!==le},ue={Call:function(e,r){var n=arguments.length>2?arguments[2]:[];if(!ue.IsCallable(e))throw new TypeError(e+" is not a function");return t(e,r,n)},RequireObjectCoercible:function(e,t){if(se(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return void 0!==e&&null!==e&&e!==!0&&e!==!1&&("function"==typeof e||"object"==typeof e||e===le)},ToObject:function(e,t){return Object(ue.RequireObjectCoercible(e,t))},IsCallable:m,IsConstructor:function(e){return ue.IsCallable(e)},ToInt32:function(e){return ue.ToNumber(e)>>0},ToUint32:function(e){return ue.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===b(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ue.ToNumber(e);return $(t)?0:0!==t&&J(t)?(t>0?1:-1)*R(A(t)):t},ToLength:function(e){var t=ue.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e===1/t:$(e)&&$(t)},SameValueZero:function(e,t){return e===t||$(e)&&$(t)},IsIterable:function(e){return ue.TypeIsObject(e)&&("undefined"!=typeof e[oe]||ee(e))},GetIterator:function(t){if(ee(t))return new e(t,"value");var r=ue.GetMethod(t,oe);if(!ue.IsCallable(r))throw new TypeError("value is not an iterable");var n=ue.Call(r,t);if(!ue.TypeIsObject(n))throw new TypeError("bad iterator");return n},GetMethod:function(e,t){var r=ue.ToObject(e)[t];if(!se(r)){if(!ue.IsCallable(r))throw new TypeError("Method not callable: "+t);return r}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ue.GetMethod(e,"return");if(void 0!==r){var n,o;try{n=ue.Call(r,e)}catch(e){o=e}if(!t){if(o)throw o;if(!ue.TypeIsObject(n))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ue.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ue.IteratorNext(e),r=ue.IteratorComplete(t);return!r&&t},Construct:function(e,t,r,n){var o="undefined"==typeof r?e:r;if(!n&&ie.construct)return ie.construct(e,t,o);var i=o.prototype;ue.TypeIsObject(i)||(i=Object.prototype);var a=S(i),l=ue.Call(e,a,t);return ue.TypeIsObject(l)?l:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(void 0===r)return t;if(!ue.TypeIsObject(r))throw new TypeError("Bad constructor");var n=r[U];if(se(n))return t;if(!ue.IsConstructor(n))throw new TypeError("Bad @@species");return n},CreateHTML:function(e,t,r,n){var o=ue.ToString(e),i="<"+t;if(""!==r){var a=ue.ToString(n),l=a.replace(/"/g,"&quot;");i+=" "+r+'="'+l+'"'}var s=i+">",u=s+o;return u+"</"+t+">"},IsRegExp:function(e){if(!ue.TypeIsObject(e))return!1;var t=e[X.match];return"undefined"!=typeof t?!!t:te.regex(e)},ToString:function(e){return ae(e)}};if(c&&ne){var ce=function(e){if(te.symbol(X[e]))return X[e];var t=X.for("Symbol."+e);return Object.defineProperty(X,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!te.symbol(X.search)){var fe=ce("search"),pe=String.prototype.search;v(RegExp.prototype,fe,function(e){return ue.Call(pe,e,[this])});var he=function(e){var t=ue.RequireObjectCoercible(this);if(!se(e)){var r=ue.GetMethod(e,fe);if("undefined"!=typeof r)return ue.Call(r,e,[t])}return ue.Call(pe,t,[ue.ToString(e)])};re(String.prototype,"search",he)}if(!te.symbol(X.replace)){var ye=ce("replace"),de=String.prototype.replace;v(RegExp.prototype,ye,function(e,t){return ue.Call(de,e,[this,t])});var ve=function(e,t){var r=ue.RequireObjectCoercible(this);if(!se(e)){var n=ue.GetMethod(e,ye);if("undefined"!=typeof n)return ue.Call(n,e,[r,t])}return ue.Call(de,r,[ue.ToString(e),t])};re(String.prototype,"replace",ve)}if(!te.symbol(X.split)){var ge=ce("split"),be=String.prototype.split;v(RegExp.prototype,ge,function(e,t){return ue.Call(be,e,[this,t])});var me=function(e,t){var r=ue.RequireObjectCoercible(this);if(!se(e)){var n=ue.GetMethod(e,ge);if("undefined"!=typeof n)return ue.Call(n,e,[r,t])}return ue.Call(be,r,[ue.ToString(e),t])};re(String.prototype,"split",me)}var we=te.symbol(X.match),Se=we&&function(){var e={};return e[X.match]=function(){return 42},42!=="a".match(e)}();if(!we||Se){var Oe=ce("match"),Ce=String.prototype.match;v(RegExp.prototype,Oe,function(e){return ue.Call(Ce,e,[this])});var Pe=function(e){var t=ue.RequireObjectCoercible(this);if(!se(e)){var r=ue.GetMethod(e,Oe);if("undefined"!=typeof r)return ue.Call(r,e,[t])}return ue.Call(Ce,t,[ue.ToString(e)])};re(String.prototype,"match",Pe)}}var ke=function(e,t,r){w.preserveToString(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),c?p(Object.getOwnPropertyNames(e),function(n){n in L||r[n]||w.proxy(e,n,t)}):p(Object.keys(e),function(n){n in L||r[n]||(t[n]=e[n])}),t.prototype=e.prototype,w.redefine(e.prototype,"constructor",t)},je=function(){return this},Be=function(e){c&&!Y(e,U)&&w.getter(e,U,je)},Ie=function(e,t){var r=t||function(){return this};v(e,oe,r),!e[oe]&&te.symbol(oe)&&(e[oe]=r)},Ee=function(e,t,r){c?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[t]=r},Te=function(e,t,r){if(Ee(e,t,r),!ue.SameValue(e[t],r))throw new TypeError("property is nonconfigurable")},xe=function(e,t,r,n){if(!ue.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var o=t.prototype;ue.TypeIsObject(o)||(o=r);var i=S(o);for(var a in n)if(Y(n,a)){var l=n[a];v(i,a,l,!0)}return i};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Me=String.fromCodePoint;re(String,"fromCodePoint",function(e){return ue.Call(Me,this,arguments)})}var _e={fromCodePoint:function(e){for(var t,r=[],n=0,o=arguments.length;n<o;n++){if(t=Number(arguments[n]),!ue.SameValue(t,ue.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?T(r,String.fromCharCode(t)):(t-=65536,T(r,String.fromCharCode((t>>10)+55296)),T(r,String.fromCharCode(t%1024+56320)))}return r.join("")},raw:function(e){var t=ue.ToObject(e,"bad callSite"),r=ue.ToObject(t.raw,"bad raw value"),n=r.length,o=ue.ToLength(n);if(o<=0)return"";for(var i,a,l,s,u=[],c=0;c<o&&(i=ue.ToString(c),l=ue.ToString(r[i]),T(u,l),!(c+1>=o));)a=c+1<arguments.length?arguments[c+1]:"",s=ue.ToString(a),T(u,s),c+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&re(String,"raw",_e.raw),g(String,_e);var Ne=function e(t,r){if(r<1)return"";if(r%2)return e(t,r-1)+t;var n=e(t,r/2);return n+n},Re=1/0,Ae={repeat:function(e){var t=ue.ToString(ue.RequireObjectCoercible(this)),r=ue.ToInteger(e);if(r<0||r>=Re)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Ne(t,r)},startsWith:function(e){var t=ue.ToString(ue.RequireObjectCoercible(this));if(ue.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var r,n=ue.ToString(e);arguments.length>1&&(r=arguments[1]);var o=_(ue.ToInteger(r),0);return E(t,o,o+n.length)===n},endsWith:function(e){var t=ue.ToString(ue.RequireObjectCoercible(this));if(ue.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var r,n=ue.ToString(e),o=t.length;arguments.length>1&&(r=arguments[1]);var i="undefined"==typeof r?o:ue.ToInteger(r),a=N(_(i,0),o);return E(t,a-n.length,a)===n},includes:function(e){if(ue.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,r=ue.ToString(e);return arguments.length>1&&(t=arguments[1]),j(this,r,t)!==-1},codePointAt:function(e){var t=ue.ToString(ue.RequireObjectCoercible(this)),r=ue.ToInteger(e),n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r),i=r+1===n;if(o<55296||o>56319||i)return o;var a=t.charCodeAt(r+1);return a<56320||a>57343?o:1024*(o-55296)+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",1/0)!==!1&&re(String.prototype,"includes",Ae.includes),String.prototype.startsWith&&String.prototype.endsWith){var Fe=a(function(){"/a/".startsWith(/a/)}),De=l(function(){return"abc".startsWith("a",1/0)===!1});Fe&&De||(re(String.prototype,"startsWith",Ae.startsWith),re(String.prototype,"endsWith",Ae.endsWith))}if(ne){var Ve=l(function(){var e=/a/;return e[X.match]=!1,"/a/".startsWith(e)});Ve||re(String.prototype,"startsWith",Ae.startsWith);var Ye=l(function(){var e=/a/;return e[X.match]=!1,"/a/".endsWith(e)});Ye||re(String.prototype,"endsWith",Ae.endsWith);var Le=l(function(){var e=/a/;return e[X.match]=!1,"/a/".includes(e)});Le||re(String.prototype,"includes",Ae.includes)}g(String.prototype,Ae);var We=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),He=new RegExp("(^["+We+"]+)|(["+We+"]+$)","g"),ze=function(){return ue.ToString(ue.RequireObjectCoercible(this)).replace(He,"")},qe=["","​","￾"].join(""),Ge=new RegExp("["+qe+"]","g"),Xe=/^[-+]0x[0-9a-f]+$/i,Ue=qe.trim().length!==qe.length;v(String.prototype,"trim",ze,Ue);var $e=function(e){return{value:e,done:0===arguments.length}},Je=function(e){ue.RequireObjectCoercible(e),this._s=ue.ToString(e),this._i=0};Je.prototype.next=function(){var e=this._s,t=this._i;if("undefined"==typeof e||t>=e.length)return this._s=void 0,$e();var r,n,o=e.charCodeAt(t);return o<55296||o>56319||t+1===e.length?n=1:(r=e.charCodeAt(t+1),n=r<56320||r>57343?1:2),this._i=t+n,$e(e.substr(t,n))},Ie(Je.prototype),Ie(String.prototype,function(){return new Je(this)});var Ze={from:function(e){var t,n=this;arguments.length>1&&(t=arguments[1]);var o,i;if("undefined"==typeof t)o=!1;else{if(!ue.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2]),o=!0}var a,l,s,u="undefined"!=typeof(ee(e)||ue.GetMethod(e,oe));if(u){l=ue.IsConstructor(n)?Object(new n):[];var c,f,p=ue.GetIterator(e);for(s=0;;){if(c=ue.IteratorStep(p),c===!1)break;f=c.value;try{o&&(f="undefined"==typeof i?t(f,s):r(t,i,f,s)),l[s]=f}catch(e){throw ue.IteratorClose(p,!0),e}s+=1}a=s}else{var h=ue.ToObject(e);a=ue.ToLength(h.length),l=ue.IsConstructor(n)?Object(new n(a)):new Array(a);var y;for(s=0;s<a;++s)y=h[s],o&&(y="undefined"==typeof i?t(y,s):r(t,i,y,s)),Te(l,s,y)}return l.length=a,l},of:function(){for(var e=arguments.length,t=this,r=n(t)||!ue.IsCallable(t)?new Array(e):ue.Construct(t,[e]),o=0;o<e;++o)Te(r,o,arguments[o]);return r.length=e,r}};g(Array,Ze),Be(Array),e=function(e,t){this.i=0,this.array=e,this.kind=t},g(e.prototype,{next:function(){var t=this.i,r=this.array;if(!(this instanceof e))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof r)for(var n=ue.ToLength(r.length);t<n;t++){var o,i=this.kind;return"key"===i?o=t:"value"===i?o=r[t]:"entry"===i&&(o=[t,r[t]]),this.i=t+1,$e(o)}return this.array=void 0,$e()}}),Ie(e.prototype);var Ke=Array.of===Ze.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}();Ke||re(Array,"of",Ze.of);var Qe={copyWithin:function(e,t){var r,n=ue.ToObject(this),o=ue.ToLength(n.length),i=ue.ToInteger(e),a=ue.ToInteger(t),l=i<0?_(o+i,0):N(i,o),s=a<0?_(o+a,0):N(a,o);arguments.length>2&&(r=arguments[2]);var u="undefined"==typeof r?o:ue.ToInteger(r),c=u<0?_(o+u,0):N(u,o),f=N(c-s,o-l),p=1;for(s<l&&l<s+f&&(p=-1,s+=f-1,l+=f-1);f>0;)s in n?n[l]=n[s]:delete n[l],s+=p,l+=p,f-=1;return n},fill:function(e){var t;arguments.length>1&&(t=arguments[1]);var r;arguments.length>2&&(r=arguments[2]);var n=ue.ToObject(this),o=ue.ToLength(n.length);t=ue.ToInteger("undefined"==typeof t?0:t),r=ue.ToInteger("undefined"==typeof r?o:r);for(var i=t<0?_(o+t,0):N(t,o),a=r<0?o+r:r,l=i;l<o&&l<a;++l)n[l]=e;return n},find:function(e){var t=ue.ToObject(this),n=ue.ToLength(t.length);if(!ue.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var o,i=arguments.length>1?arguments[1]:null,a=0;a<n;a++)if(o=t[a],i){if(r(e,i,o,a,t))return o}else if(e(o,a,t))return o},findIndex:function(e){var t=ue.ToObject(this),n=ue.ToLength(t.length);if(!ue.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var o=arguments.length>1?arguments[1]:null,i=0;i<n;i++)if(o){if(r(e,o,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new e(this,"key")},values:function(){return new e(this,"value")},entries:function(){return new e(this,"entry")}};if(Array.prototype.keys&&!ue.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ue.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[oe]&&(g(Array.prototype,{values:Array.prototype[oe]}),te.symbol(X.unscopables)&&(Array.prototype[X.unscopables].values=!0)),f&&Array.prototype.values&&"values"!==Array.prototype.values.name){var et=Array.prototype.values;re(Array.prototype,"values",function(){return ue.Call(et,this,arguments)}),v(Array.prototype,oe,Array.prototype.values,!0)}g(Array.prototype,Qe),1/[!0].indexOf(!0,-0)<0&&v(Array.prototype,"indexOf",function(e){var t=B(this,arguments);return 0===t&&1/t<0?0:t},!0),Ie(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&Ie(Object.getPrototypeOf([].values()));var tt=function(){return l(function(){return 0===Array.from({length:-1}).length})}(),rt=function(){var e=Array.from([0].entries());return 1===e.length&&n(e[0])&&0===e[0][0]&&0===e[0][1]}();tt&&rt||re(Array,"from",Ze.from);var nt=function(){return l(function(){return Array.from([0],void 0)})}();if(!nt){var ot=Array.from;re(Array,"from",function(e){return arguments.length>1&&"undefined"!=typeof arguments[1]?ue.Call(ot,this,arguments):r(ot,this,e)})}var it=-(Math.pow(2,32)-1),at=function(e,t){var n={length:it};return n[t?(n.length>>>0)-1:0]=!0,l(function(){return r(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!at(Array.prototype.forEach)){var lt=Array.prototype.forEach;re(Array.prototype,"forEach",function(e){return ue.Call(lt,this.length>=0?this:[],arguments)},!0)}if(!at(Array.prototype.map)){var st=Array.prototype.map;re(Array.prototype,"map",function(e){return ue.Call(st,this.length>=0?this:[],arguments)},!0)}if(!at(Array.prototype.filter)){var ut=Array.prototype.filter;re(Array.prototype,"filter",function(e){return ue.Call(ut,this.length>=0?this:[],arguments)},!0)}if(!at(Array.prototype.some)){var ct=Array.prototype.some;re(Array.prototype,"some",function(e){return ue.Call(ct,this.length>=0?this:[],arguments)},!0)}if(!at(Array.prototype.every)){var ft=Array.prototype.every;re(Array.prototype,"every",function(e){return ue.Call(ft,this.length>=0?this:[],arguments)},!0)}if(!at(Array.prototype.reduce)){var pt=Array.prototype.reduce;re(Array.prototype,"reduce",function(e){return ue.Call(pt,this.length>=0?this:[],arguments)},!0)}if(!at(Array.prototype.reduceRight,!0)){var ht=Array.prototype.reduceRight;re(Array.prototype,"reduceRight",function(e){return ue.Call(ht,this.length>=0?this:[],arguments)},!0)}var yt=8!==Number("0o10"),dt=2!==Number("0b10"),vt=d(qe,function(e){return 0===Number(e+0+e)});if(yt||dt||vt){var gt=Number,bt=/^0b[01]+$/i,mt=/^0o[0-7]+$/i,wt=bt.test.bind(bt),St=mt.test.bind(mt),Ot=function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),te.primitive(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),te.primitive(t)))return t;throw new TypeError("No default value")},Ct=Ge.test.bind(Ge),Pt=Xe.test.bind(Xe),kt=function(){var e=function(t){var r;r=arguments.length>0?te.primitive(t)?t:Ot(t,"number"):0,"string"==typeof r&&(r=ue.Call(ze,r),wt(r)?r=parseInt(E(r,2),2):St(r)?r=parseInt(E(r,2),8):(Ct(r)||Pt(r))&&(r=NaN));var n=this,o=l(function(){return gt.prototype.valueOf.call(n),!0});return n instanceof e&&!o?new gt(r):gt(r)};return e}();ke(gt,kt,{}),g(kt,{NaN:gt.NaN,MAX_VALUE:gt.MAX_VALUE,MIN_VALUE:gt.MIN_VALUE,NEGATIVE_INFINITY:gt.NEGATIVE_INFINITY,POSITIVE_INFINITY:gt.POSITIVE_INFINITY}),Number=kt,w.redefine(P,"Number",kt)}var jt=Math.pow(2,53)-1;g(Number,{MAX_SAFE_INTEGER:jt,MIN_SAFE_INTEGER:-jt,EPSILON:2.220446049250313e-16,parseInt:P.parseInt,parseFloat:P.parseFloat,isFinite:J,isInteger:function(e){return J(e)&&ue.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&A(e)<=Number.MAX_SAFE_INTEGER},isNaN:$}),v(Number,"parseInt",P.parseInt,Number.parseInt!==P.parseInt),1===[,1].find(function(){return!0})&&re(Array.prototype,"find",Qe.find),0!==[,1].findIndex(function(){return!0})&&re(Array.prototype,"findIndex",Qe.findIndex);var Bt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),It=function(e,t){c&&Bt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},Et=function(){for(var e=Number(this),t=arguments.length,r=t-e,n=new Array(r<0?0:r),o=e;o<t;++o)n[o-e]=arguments[o];return n},Tt=function(e){return function(t,r){return t[r]=e[r],t}},xt=function(e,t){var r,n=o(Object(t));return ue.IsCallable(Object.getOwnPropertySymbols)&&(r=y(Object.getOwnPropertySymbols(Object(t)),Bt(t))),h(I(n,r||[]),Tt(t),e)},Mt={assign:function(e,t){var r=ue.ToObject(e,"Cannot convert undefined or null to object");return h(ue.Call(Et,1,arguments),xt,r)},is:function(e,t){return ue.SameValue(e,t)}},_t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}();if(_t&&re(Object,"assign",Mt.assign),g(Object,Mt),c){var Nt={setPrototypeOf:function(e,t){var n,o=function(e,t){if(!ue.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ue.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)},i=function(e,t){return o(e,t),r(n,e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,t).set,r(n,{},null)}catch(r){if(e.prototype!=={}[t])return;n=function(e){this[t]=e},i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};g(Object,Nt)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var e=Object.create(null),t=Object.getPrototypeOf,r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n},Object.setPrototypeOf=function(t,n){var o=null===n?e:n;return r(t,o)},Object.setPrototypeOf.polyfill=!1}();var Rt=!a(function(){Object.keys("foo")});if(!Rt){var At=Object.keys;re(Object,"keys",function(e){return At(ue.ToObject(e))}),o=Object.keys}var Ft=a(function(){Object.keys(/a/g)});if(Ft){var Dt=Object.keys;re(Object,"keys",function(e){if(te.regex(e)){var t=[];for(var r in e)Y(e,r)&&T(t,r);return t}return Dt(e)}),o=Object.keys}if(Object.getOwnPropertyNames){var Vt=!a(function(){Object.getOwnPropertyNames("foo")});if(!Vt){var Yt="object"==typeof window?Object.getOwnPropertyNames(window):[],Lt=Object.getOwnPropertyNames;re(Object,"getOwnPropertyNames",function(e){var t=ue.ToObject(e);if("[object Window]"===b(t))try{return Lt(t)}catch(e){return I([],Yt)}return Lt(t)})}}if(Object.getOwnPropertyDescriptor){var Wt=!a(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Wt){var Ht=Object.getOwnPropertyDescriptor;re(Object,"getOwnPropertyDescriptor",function(e,t){return Ht(ue.ToObject(e),t)})}}if(Object.seal){var zt=!a(function(){Object.seal("foo")});if(!zt){var qt=Object.seal;re(Object,"seal",function(e){return ue.TypeIsObject(e)?qt(e):e})}}if(Object.isSealed){var Gt=!a(function(){Object.isSealed("foo")});if(!Gt){var Xt=Object.isSealed;re(Object,"isSealed",function(e){return!ue.TypeIsObject(e)||Xt(e)})}}if(Object.freeze){var Ut=!a(function(){Object.freeze("foo")});if(!Ut){var $t=Object.freeze;re(Object,"freeze",function(e){return ue.TypeIsObject(e)?$t(e):e})}}if(Object.isFrozen){var Jt=!a(function(){Object.isFrozen("foo")});if(!Jt){var Zt=Object.isFrozen;re(Object,"isFrozen",function(e){return!ue.TypeIsObject(e)||Zt(e)})}}if(Object.preventExtensions){var Kt=!a(function(){Object.preventExtensions("foo")});if(!Kt){var Qt=Object.preventExtensions;re(Object,"preventExtensions",function(e){return ue.TypeIsObject(e)?Qt(e):e})}}if(Object.isExtensible){var er=!a(function(){Object.isExtensible("foo")});if(!er){var tr=Object.isExtensible;re(Object,"isExtensible",function(e){
return!!ue.TypeIsObject(e)&&tr(e)})}}if(Object.getPrototypeOf){var rr=!a(function(){Object.getPrototypeOf("foo")});if(!rr){var nr=Object.getPrototypeOf;re(Object,"getPrototypeOf",function(e){return nr(ue.ToObject(e))})}}var or=c&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ue.IsCallable(e.get)}();if(c&&!or){var ir=function(){if(!ue.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e};w.getter(RegExp.prototype,"flags",ir)}var ar=c&&l(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),lr=ne&&c&&function(){var e=/./;return e[X.match]=!1,RegExp(e)===e}(),sr=l(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),ur=sr&&l(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!sr||!ur){var cr=RegExp.prototype.toString;v(RegExp.prototype,"toString",function(){var e=ue.RequireObjectCoercible(this);if(te.regex(e))return r(cr,e);var t=ae(e.source),n=ae(e.flags);return"/"+t+"/"+n},!0),w.preserveToString(RegExp.prototype.toString,cr)}if(c&&(!ar||lr)){var fr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},hr=function(){return this.source},yr=ue.IsCallable(pr.get)?pr.get:hr,dr=RegExp,vr=function(){return function e(t,r){var n=ue.IsRegExp(t),o=this instanceof e;if(!o&&n&&"undefined"==typeof r&&t.constructor===e)return t;var i=t,a=r;return te.regex(t)?(i=ue.Call(yr,t),a="undefined"==typeof r?ue.Call(fr,t):r,new e(i,a)):(n&&(i=t.source,a="undefined"==typeof r?t.flags:r),new dr(t,r))}}();ke(dr,vr,{$input:!0}),RegExp=vr,w.redefine(P,"RegExp",vr)}if(c){var gr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(o(gr),function(e){e in RegExp&&!(gr[e]in RegExp)&&w.getter(RegExp,gr[e],function(){return RegExp[e]})})}Be(RegExp);var br=1/Number.EPSILON,mr=function(e){return e+br-br},wr=Math.pow(2,-23),Sr=Math.pow(2,127)*(2-wr),Or=Math.pow(2,-126),Cr=Math.E,Pr=Math.LOG2E,kr=Math.LOG10E,jr=Number.prototype.clz;delete Number.prototype.clz;var Br={acosh:function(e){var t=Number(e);return $(t)||e<1?NaN:1===t?0:t===1/0?t:D(t/Cr+V(t+1)*V(t-1)/Cr)+1},asinh:function e(t){var r=Number(t);return 0!==r&&k(r)?r<0?-e(-r):D(r+V(r*r+1)):r},atanh:function(e){var t=Number(e);return $(t)||t<-1||t>1?NaN:t===-1?-(1/0):1===t?1/0:0===t?t:.5*D((1+t)/(1-t))},cbrt:function(e){var t=Number(e);if(0===t)return t;var r,n=t<0;return n&&(t=-t),t===1/0?r=1/0:(r=F(D(t)/3),r=(t/(r*r)+2*r)/3),n?-r:r},clz32:function(e){var t=Number(e),r=ue.ToUint32(t);return 0===r?32:jr?ue.Call(jr,r):31-R(D(r+.5)*Pr)},cosh:function(e){var t=Number(e);return 0===t?1:$(t)?NaN:k(t)?(t<0&&(t=-t),t>21?F(t)/2:(F(t)+F(-t))/2):1/0},expm1:function(e){var t=Number(e);if(t===-(1/0))return-1;if(!k(t)||0===t)return t;if(A(t)>.5)return F(t)-1;for(var r=t,n=0,o=1;n+r!==n;)n+=r,o+=1,r*=t/o;return n},hypot:function(e,t){for(var r=0,n=0,o=0;o<arguments.length;++o){var i=A(Number(arguments[o]));n<i?(r*=n/i*(n/i),r+=1,n=i):r+=i>0?i/n*(i/n):i}return n===1/0?1/0:n*V(r)},log2:function(e){return D(e)*Pr},log10:function(e){return D(e)*kr},log1p:function(e){var t=Number(e);return t<-1||$(t)?NaN:0===t||t===1/0?t:t===-1?-(1/0):1+t-1===0?t:t*(D(1+t)/(1+t-1))},sign:Z,sinh:function(e){var t=Number(e);return k(t)&&0!==t?A(t)<1?(Math.expm1(t)-Math.expm1(-t))/2:(F(t-1)-F(-t-1))*Cr/2:t},tanh:function(e){var t=Number(e);return $(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function(e){var t=Number(e);return t<0?-R(-t):R(t)},imul:function(e,t){var r=ue.ToUint32(e),n=ue.ToUint32(t),o=r>>>16&65535,i=65535&r,a=n>>>16&65535,l=65535&n;return i*l+(o*l+i*a<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-(1/0)||$(t))return t;var r=Z(t),n=A(t);if(n<Or)return r*mr(n/Or/wr)*Or*wr;var o=(1+wr/Number.EPSILON)*n,i=o-(o-n);return i>Sr||$(i)?r*(1/0):r*i}};g(Math,Br),v(Math,"log1p",Br.log1p,Math.log1p(-1e-17)!==-1e-17),v(Math,"asinh",Br.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),v(Math,"tanh",Br.tanh,Math.tanh(-2e-17)!==-2e-17),v(Math,"acosh",Br.acosh,Math.acosh(Number.MAX_VALUE)===1/0),v(Math,"cbrt",Br.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),v(Math,"sinh",Br.sinh,Math.sinh(-2e-17)!==-2e-17);var Ir=Math.expm1(10);v(Math,"expm1",Br.expm1,Ir>22025.465794806718||Ir<22025.465794806718);var Er=Math.round,Tr=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+Number.EPSILON/3.99),xr=br+1,Mr=2*br-1,_r=[xr,Mr].every(function(e){return Math.round(e)===e});v(Math,"round",function(e){var t=R(e),r=t===-1?-0:t+1;return e-t<.5?t:r},!Tr||!_r),w.preserveToString(Math.round,Er);var Nr=Math.imul;Math.imul(4294967295,5)!==-5&&(Math.imul=Br.imul,w.preserveToString(Math.imul,Nr)),2!==Math.imul.length&&re(Math,"imul",function(e,t){return ue.Call(Nr,Math,arguments)});var Rr=function(){var e=P.setTimeout;if("function"==typeof e||"object"==typeof e){ue.IsPromise=function(e){return!!ue.TypeIsObject(e)&&"undefined"!=typeof e._promise};var t,n=function(e){if(!ue.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this,r=function(e,r){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=r};if(t.resolve=void 0,t.reject=void 0,t.promise=new e(r),!ue.IsCallable(t.resolve)||!ue.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ue.IsCallable(window.postMessage)&&(t=function(){var e=[],t="zero-timeout-message",r=function(r){T(e,r),window.postMessage(t,"*")},n=function(r){if(r.source===window&&r.data===t){if(r.stopPropagation(),0===e.length)return;var n=M(e);n()}};return window.addEventListener("message",n,!0),r});var o,i,a=function(){var e=P.Promise,t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}},l=ue.IsCallable(P.setImmediate)?P.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:a()||(ue.IsCallable(t)?t():function(t){e(t,0)}),s=function(e){return e},u=function(e){throw e},c=0,f=1,p=2,h=0,y=1,d=2,v={},b=function(e,t,r){l(function(){m(e,t,r)})},m=function(e,t,r){var n,o;if(t===v)return e(r);try{n=e(r),o=t.resolve}catch(e){n=e,o=t.reject}o(n)},w=function(e,t){var r=e._promise,n=r.reactionLength;if(n>0&&(b(r.fulfillReactionHandler0,r.reactionCapability0,t),r.fulfillReactionHandler0=void 0,r.rejectReactions0=void 0,r.reactionCapability0=void 0,n>1))for(var o=1,i=0;o<n;o++,i+=3)b(r[i+h],r[i+d],t),e[i+h]=void 0,e[i+y]=void 0,e[i+d]=void 0;r.result=t,r.state=f,r.reactionLength=0},S=function(e,t){var r=e._promise,n=r.reactionLength;if(n>0&&(b(r.rejectReactionHandler0,r.reactionCapability0,t),r.fulfillReactionHandler0=void 0,r.rejectReactions0=void 0,r.reactionCapability0=void 0,n>1))for(var o=1,i=0;o<n;o++,i+=3)b(r[i+y],r[i+d],t),e[i+h]=void 0,e[i+y]=void 0,e[i+d]=void 0;r.result=t,r.state=p,r.reactionLength=0},O=function(e){var t=!1,r=function(r){var n;if(!t){if(t=!0,r===e)return S(e,new TypeError("Self resolution"));if(!ue.TypeIsObject(r))return w(e,r);try{n=r.then}catch(t){return S(e,t)}return ue.IsCallable(n)?void l(function(){k(e,r,n)}):w(e,r)}},n=function(r){if(!t)return t=!0,S(e,r)};return{resolve:r,reject:n}},C=function(e,t,n,o){e===i?r(e,t,n,o,v):r(e,t,n,o)},k=function(e,t,r){var n=O(e),o=n.resolve,i=n.reject;try{C(r,t,o,i)}catch(e){i(e)}},j=function(){var e=function(t){if(!(this instanceof e))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ue.IsCallable(t))throw new TypeError("not a valid resolver");var r=xe(this,e,o,{_promise:{result:void 0,state:c,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=O(r),i=n.reject;try{t(n.resolve,i)}catch(e){i(e)}return r};return e}();o=j.prototype;var B=function(e,t,r,n){var o=!1;return function(i){if(!o&&(o=!0,t[e]=i,0===--n.count)){var a=r.resolve;a(t)}}},I=function(e,t,r){for(var n,o,i=e.iterator,a=[],l={count:1},s=0;;){try{if(n=ue.IteratorStep(i),n===!1){e.done=!0;break}o=n.value}catch(t){throw e.done=!0,t}a[s]=void 0;var u=t.resolve(o),c=B(s,a,r,l);l.count+=1,C(u.then,u,c,r.reject),s+=1}if(0===--l.count){var f=r.resolve;f(a)}return r.promise},E=function(e,t,r){for(var n,o,i,a=e.iterator;;){try{if(n=ue.IteratorStep(a),n===!1){e.done=!0;break}o=n.value}catch(t){throw e.done=!0,t}i=t.resolve(o),C(i.then,i,r.resolve,r.reject)}return r.promise};return g(j,{all:function(e){var t=this;if(!ue.TypeIsObject(t))throw new TypeError("Promise is not object");var r,o,i=new n(t);try{return r=ue.GetIterator(e),o={iterator:r,done:!1},I(o,t,i)}catch(e){var a=e;if(o&&!o.done)try{ue.IteratorClose(r,!0)}catch(e){a=e}var l=i.reject;return l(a),i.promise}},race:function(e){var t=this;if(!ue.TypeIsObject(t))throw new TypeError("Promise is not object");var r,o,i=new n(t);try{return r=ue.GetIterator(e),o={iterator:r,done:!1},E(o,t,i)}catch(e){var a=e;if(o&&!o.done)try{ue.IteratorClose(r,!0)}catch(e){a=e}var l=i.reject;return l(a),i.promise}},reject:function(e){var t=this;if(!ue.TypeIsObject(t))throw new TypeError("Bad promise constructor");var r=new n(t),o=r.reject;return o(e),r.promise},resolve:function(e){var t=this;if(!ue.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ue.IsPromise(e)){var r=e.constructor;if(r===t)return e}var o=new n(t),i=o.resolve;return i(e),o.promise}}),g(o,{catch:function(e){return this.then(null,e)},then:function(e,t){var r=this;if(!ue.IsPromise(r))throw new TypeError("not a promise");var o,i=ue.SpeciesConstructor(r,j),a=arguments.length>2&&arguments[2]===v;o=a&&i===j?v:new n(i);var l,g=ue.IsCallable(e)?e:s,m=ue.IsCallable(t)?t:u,w=r._promise;if(w.state===c){if(0===w.reactionLength)w.fulfillReactionHandler0=g,w.rejectReactionHandler0=m,w.reactionCapability0=o;else{var S=3*(w.reactionLength-1);w[S+h]=g,w[S+y]=m,w[S+d]=o}w.reactionLength+=1}else if(w.state===f)l=w.result,b(g,o,l);else{if(w.state!==p)throw new TypeError("unexpected Promise state");l=w.result,b(m,o,l)}return o.promise}}),v=new n(j),i=o.then,j}}();if(P.Promise&&(delete P.Promise.accept,delete P.Promise.defer,delete P.Promise.prototype.chain),"function"==typeof Rr){g(P,{Promise:Rr});var Ar=O(P.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),Fr=!a(function(){P.Promise.reject(42).then(null,5).then(null,L)}),Dr=a(function(){P.Promise.call(3,L)}),Vr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,L).then(null,L)}catch(e){return!0}return t===r}(P.Promise),Yr=c&&function(){var e=0,t=Object.defineProperty({},"then",{get:function(){e+=1}});return Promise.resolve(t),1===e}(),Lr=function e(t){var r=new Promise(t);t(3,function(){}),this.then=r.then,this.constructor=e};Lr.prototype=Promise.prototype,Lr.all=Promise.all;var Wr=l(function(){return!!Lr.all([1,2])});if(Ar&&Fr&&Dr&&!Vr&&Yr&&!Wr||(Promise=Rr,re(P,"Promise",Rr)),1!==Promise.all.length){var Hr=Promise.all;re(Promise,"all",function(e){return ue.Call(Hr,this,arguments)})}if(1!==Promise.race.length){var zr=Promise.race;re(Promise,"race",function(e){return ue.Call(zr,this,arguments)})}if(1!==Promise.resolve.length){var qr=Promise.resolve;re(Promise,"resolve",function(e){return ue.Call(qr,this,arguments)})}if(1!==Promise.reject.length){var Gr=Promise.reject;re(Promise,"reject",function(e){return ue.Call(Gr,this,arguments)})}It(Promise,"all"),It(Promise,"race"),It(Promise,"resolve"),It(Promise,"reject"),Be(Promise)}var Xr=function(e){var t=o(h(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Ur=Xr(["z","a","bb"]),$r=Xr(["z",1,"a","3",2]);if(c){var Jr=function(e,t){return t||Ur?se(e)?"^"+ue.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?$r?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},Zr=function(){return Object.create?Object.create(null):{}},Kr=function(e,t,o){if(n(o)||te.string(o))p(o,function(e){if(!ue.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(o instanceof e)r(e.prototype.forEach,o,function(e,r){t.set(r,e)});else{var i,a;if(!se(o)){if(a=t.set,!ue.IsCallable(a))throw new TypeError("bad map");i=ue.GetIterator(o)}if("undefined"!=typeof i)for(;;){var l=ue.IteratorStep(i);if(l===!1)break;var s=l.value;try{if(!ue.TypeIsObject(s))throw new TypeError("Iterator value "+s+" is not an entry object");r(a,t,s[0],s[1])}catch(e){throw ue.IteratorClose(i,!0),e}}}},Qr=function(e,t,o){if(n(o)||te.string(o))p(o,function(e){t.add(e)});else if(o instanceof e)r(e.prototype.forEach,o,function(e){t.add(e)});else{var i,a;if(!se(o)){if(a=t.add,!ue.IsCallable(a))throw new TypeError("bad set");i=ue.GetIterator(o)}if("undefined"!=typeof i)for(;;){var l=ue.IteratorStep(i);if(l===!1)break;var s=l.value;try{r(a,t,s)}catch(e){throw ue.IteratorClose(i,!0),e}}}},en={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var n=function(e){return!!e._es6map},o=function(e,t){if(!ue.TypeIsObject(e)||!n(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ue.ToString(e))},i=function(e,t){o(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};i.prototype={next:function(){var e=this.i,t=this.kind,r=this.head;if("undefined"==typeof this.i)return $e();for(;e.isRemoved()&&e!==r;)e=e.prev;for(var n;e.next!==r;)if(e=e.next,!e.isRemoved())return n="key"===t?e.key:"value"===t?e.value:[e.key,e.value],this.i=e,$e(n);return this.i=void 0,$e()}},Ie(i.prototype);var a,l=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=xe(this,e,a,{_es6map:!0,_head:null,_map:W?new W:null,_size:0,_storage:Zr()}),n=new t(null,null);return n.next=n.prev=n,r._head=n,arguments.length>0&&Kr(e,r,arguments[0]),r};return a=l.prototype,w.getter(a,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),g(a,{get:function(e){o(this,"get");var t,r=Jr(e,!0);if(null!==r)return t=this._storage[r],t?t.value:void 0;if(this._map)return t=z.call(this._map,e),t?t.value:void 0;for(var n=this._head,i=n;(i=i.next)!==n;)if(ue.SameValueZero(i.key,e))return i.value},has:function(e){o(this,"has");var t=Jr(e,!0);if(null!==t)return"undefined"!=typeof this._storage[t];if(this._map)return q.call(this._map,e);for(var r=this._head,n=r;(n=n.next)!==r;)if(ue.SameValueZero(n.key,e))return!0;return!1},set:function(e,r){o(this,"set");var n,i=this._head,a=i,l=Jr(e,!0);if(null!==l){if("undefined"!=typeof this._storage[l])return this._storage[l].value=r,this;n=this._storage[l]=new t(e,r),a=i.prev}else this._map&&(q.call(this._map,e)?z.call(this._map,e).value=r:(n=new t(e,r),G.call(this._map,e,n),a=i.prev));for(;(a=a.next)!==i;)if(ue.SameValueZero(a.key,e))return a.value=r,this;return n=n||new t(e,r),ue.SameValue(-0,e)&&(n.key=0),n.next=this._head,n.prev=this._head.prev,n.prev.next=n,n.next.prev=n,this._size+=1,this},delete:function(t){o(this,"delete");var r=this._head,n=r,i=Jr(t,!0);if(null!==i){if("undefined"==typeof this._storage[i])return!1;n=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!q.call(this._map,t))return!1;n=z.call(this._map,t).prev,H.call(this._map,t)}for(;(n=n.next)!==r;)if(ue.SameValueZero(n.key,t))return n.key=e,n.value=e,n.prev.next=n.next,n.next.prev=n.prev,this._size-=1,!0;return!1},clear:function(){o(this,"clear"),this._map=W?new W:null,this._size=0,this._storage=Zr();for(var t=this._head,r=t,n=r.next;(r=n)!==t;)r.key=e,r.value=e,n=r.next,r.next=r.prev=t;t.next=t.prev=t},keys:function(){return o(this,"keys"),new i(this,"key")},values:function(){return o(this,"values"),new i(this,"value")},entries:function(){return o(this,"entries"),new i(this,"key+value")},forEach:function(e){o(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),i=n.next();!i.done;i=n.next())t?r(e,t,i.value[1],i.value[0],this):e(i.value[1],i.value[0],this)}}),Ie(a,a.entries),l}(),Set:function(){var e,t=function(e){return e._es6set&&"undefined"!=typeof e._storage},n=function(e,r){if(!ue.TypeIsObject(e)||!t(e))throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ue.ToString(e))},i=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var r=xe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:Zr()});if(!r._es6set)throw new TypeError("bad set");return arguments.length>0&&Qr(t,r,arguments[0]),r};e=i.prototype;var a=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var r=t.charAt(0);return"$"===r?E(t,1):"n"===r?+E(t,1):"b"===r?"btrue"===t:+t}},l=function(e){if(!e["[[SetData]]"]){var t=new en.Map;e["[[SetData]]"]=t,p(o(e._storage),function(e){var r=a(e);t.set(r,r)}),e["[[SetData]]"]=t}e._storage=null};return w.getter(i.prototype,"size",function(){return n(this,"size"),this._storage?o(this._storage).length:(l(this),this["[[SetData]]"].size)}),g(i.prototype,{has:function(e){n(this,"has");var t;return this._storage&&null!==(t=Jr(e))?!!this._storage[t]:(l(this),this["[[SetData]]"].has(e))},add:function(e){n(this,"add");var t;return this._storage&&null!==(t=Jr(e))?(this._storage[t]=!0,this):(l(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){n(this,"delete");var t;if(this._storage&&null!==(t=Jr(e))){var r=Y(this._storage,t);return delete this._storage[t]&&r}return l(this),this["[[SetData]]"].delete(e)},clear:function(){n(this,"clear"),this._storage&&(this._storage=Zr()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return n(this,"values"),l(this),this["[[SetData]]"].values()},entries:function(){return n(this,"entries"),l(this),this["[[SetData]]"].entries()},forEach:function(e){n(this,"forEach");var t=arguments.length>1?arguments[1]:null,o=this;l(o),this["[[SetData]]"].forEach(function(n,i){t?r(e,t,i,i,o):e(i,i,o)})}}),v(i.prototype,"keys",i.prototype.values,!0),Ie(i.prototype,i.prototype.values),i}()};if(P.Map||P.Set){var tn=l(function(){return 2===new Map([[1,2]]).get(1)});tn||(P.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new W;return arguments.length>0&&Kr(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,P.Map.prototype),t},P.Map.prototype=S(W.prototype),v(P.Map.prototype,"constructor",P.Map,!0),w.preserveToString(P.Map,W));var rn=new Map,nn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);return e.set(-0,e),e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}(),on=rn.set(1,2)===rn;nn&&on||re(Map.prototype,"set",function(e,t){return r(G,this,0===e?0:e,t),this}),nn||(g(Map.prototype,{get:function(e){return r(z,this,0===e?0:e)},has:function(e){return r(q,this,0===e?0:e)}},!0),w.preserveToString(Map.prototype.get,z),w.preserveToString(Map.prototype.has,q));var an=new Set,ln=function(e){return e.delete(0),e.add(-0),!e.has(0)}(an),sn=an.add(1)===an;if(!ln||!sn){var un=Set.prototype.add;Set.prototype.add=function(e){return r(un,this,0===e?0:e),this},w.preserveToString(Set.prototype.add,un)}if(!ln){var cn=Set.prototype.has;Set.prototype.has=function(e){return r(cn,this,0===e?0:e)},w.preserveToString(Set.prototype.has,cn);var fn=Set.prototype.delete;Set.prototype.delete=function(e){return r(fn,this,0===e?0:e)},w.preserveToString(Set.prototype.delete,fn)}var pn=O(P.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),hn=Object.setPrototypeOf&&!pn,yn=function(){try{return!(P.Map()instanceof P.Map)}catch(e){return e instanceof TypeError}}();0===P.Map.length&&!hn&&yn||(P.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new W;return arguments.length>0&&Kr(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},P.Map.prototype=W.prototype,v(P.Map.prototype,"constructor",P.Map,!0),w.preserveToString(P.Map,W));var dn=O(P.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),vn=Object.setPrototypeOf&&!dn,gn=function(){try{return!(P.Set()instanceof P.Set)}catch(e){return e instanceof TypeError}}();if(0!==P.Set.length||vn||!gn){var bn=P.Set;P.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new bn;return arguments.length>0&&Qr(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},P.Set.prototype=bn.prototype,v(P.Set.prototype,"constructor",P.Set,!0),w.preserveToString(P.Set,bn)}var mn=new P.Map,wn=!l(function(){return mn.keys().next().done});if(("function"!=typeof P.Map.prototype.clear||0!==(new P.Set).size||0!==mn.size||"function"!=typeof P.Map.prototype.keys||"function"!=typeof P.Set.prototype.keys||"function"!=typeof P.Map.prototype.forEach||"function"!=typeof P.Set.prototype.forEach||s(P.Map)||s(P.Set)||"function"!=typeof mn.keys().next||wn||!pn)&&g(P,{Map:en.Map,Set:en.Set},!0),P.Set.prototype.keys!==P.Set.prototype.values&&v(P.Set.prototype,"keys",P.Set.prototype.values,!0),Ie(Object.getPrototypeOf((new P.Map).keys())),Ie(Object.getPrototypeOf((new P.Set).keys())),f&&"has"!==P.Set.prototype.has.name){var Sn=P.Set.prototype.has;re(P.Set.prototype,"has",function(e){return r(Sn,this,e)})}}g(P,en),Be(P.Map),Be(P.Set)}var On=function(e){if(!ue.TypeIsObject(e))throw new TypeError("target must be an object")},Cn={apply:function(){return ue.Call(ue.Call,null,arguments)},construct:function(e,t){if(!ue.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var r=arguments.length>2?arguments[2]:e;if(!ue.IsConstructor(r))throw new TypeError("new.target must be a constructor.");return ue.Construct(e,t,r,"internal")},deleteProperty:function(e,t){if(On(e),c){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable)return!1}return delete e[t]},has:function(e,t){return On(e),t in e}};Object.getOwnPropertyNames&&Object.assign(Cn,{ownKeys:function(e){On(e);var t=Object.getOwnPropertyNames(e);return ue.IsCallable(Object.getOwnPropertySymbols)&&x(t,Object.getOwnPropertySymbols(e)),t}});var Pn=function(e){return!a(e)};if(Object.preventExtensions&&Object.assign(Cn,{isExtensible:function(e){return On(e),Object.isExtensible(e)},preventExtensions:function(e){return On(e),Pn(function(){Object.preventExtensions(e)})}}),c){var kn=function(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(null===o)return;return kn(o,t,r)}return"value"in n?n.value:n.get?ue.Call(n.get,r):void 0},jn=function(e,t,n,o){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){var a=Object.getPrototypeOf(e);if(null!==a)return jn(a,t,n,o);i={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in i){if(!i.writable)return!1;if(!ue.TypeIsObject(o))return!1;var l=Object.getOwnPropertyDescriptor(o,t);return l?ie.defineProperty(o,t,{value:n}):ie.defineProperty(o,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}return!!i.set&&(r(i.set,o,n),!0)};Object.assign(Cn,{defineProperty:function(e,t,r){return On(e),Pn(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function(e,t){return On(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){On(e);var r=arguments.length>2?arguments[2]:e;return kn(e,t,r)},set:function(e,t,r){On(e);var n=arguments.length>3?arguments[3]:e;return jn(e,t,r,n)}})}if(Object.getPrototypeOf){var Bn=Object.getPrototypeOf;Cn.getPrototypeOf=function(e){return On(e),Bn(e)}}if(Object.setPrototypeOf&&Cn.getPrototypeOf){var In=function(e,t){for(var r=t;r;){if(e===r)return!0;r=Cn.getPrototypeOf(r)}return!1};Object.assign(Cn,{setPrototypeOf:function(e,t){if(On(e),null!==t&&!ue.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===ie.getPrototypeOf(e)||!(ie.isExtensible&&!ie.isExtensible(e))&&(!In(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}var En=function(e,t){if(ue.IsCallable(P.Reflect[e])){var r=l(function(){return P.Reflect[e](1),P.Reflect[e](NaN),P.Reflect[e](!0),!0});r&&re(P.Reflect,e,t)}else v(P.Reflect,e,t)};Object.keys(Cn).forEach(function(e){En(e,Cn[e])});var Tn=P.Reflect.getPrototypeOf;if(f&&Tn&&"getPrototypeOf"!==Tn.name&&re(P.Reflect,"getPrototypeOf",function(e){return r(Tn,P.Reflect,e)}),P.Reflect.setPrototypeOf&&l(function(){return P.Reflect.setPrototypeOf(1,{}),!0})&&re(P.Reflect,"setPrototypeOf",Cn.setPrototypeOf),P.Reflect.defineProperty&&(l(function(){var e=!P.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!P.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||re(P.Reflect,"defineProperty",Cn.defineProperty)),P.Reflect.construct&&(l(function(){var e=function(){};return P.Reflect.construct(function(){},[],e)instanceof e})||re(P.Reflect,"construct",Cn.construct)),"Invalid Date"!==String(new Date(NaN))){var xn=Date.prototype.toString,Mn=function(){var e=+this;return e!==e?"Invalid Date":ue.Call(xn,this)};re(Date.prototype,"toString",Mn)}var _n={anchor:function(e){return ue.CreateHTML(this,"a","name",e)},big:function(){return ue.CreateHTML(this,"big","","")},blink:function(){return ue.CreateHTML(this,"blink","","")},bold:function(){return ue.CreateHTML(this,"b","","")},fixed:function(){return ue.CreateHTML(this,"tt","","")},fontcolor:function(e){return ue.CreateHTML(this,"font","color",e)},fontsize:function(e){return ue.CreateHTML(this,"font","size",e)},italics:function(){return ue.CreateHTML(this,"i","","")},link:function(e){return ue.CreateHTML(this,"a","href",e)},small:function(){return ue.CreateHTML(this,"small","","")},strike:function(){return ue.CreateHTML(this,"strike","","")},sub:function(){return ue.CreateHTML(this,"sub","","")},sup:function(){return ue.CreateHTML(this,"sup","","")}};p(Object.keys(_n),function(e){var t=String.prototype[e],n=!1;if(ue.IsCallable(t)){var o=r(t,"",' " '),i=I([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else n=!0;n&&re(String.prototype,e,_n[e])});var Nn=function(){if(!ne)return!1;var e="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if("undefined"!=typeof e(X()))return!0;if("[null]"!==e([X()]))return!0;var t={a:X()};return t[X()]=!0,"{}"!==e(t)}(),Rn=l(function(){return!ne||"{}"===JSON.stringify(Object(X()))&&"[{}]"===JSON.stringify([Object(X())])});if(Nn||!Rn){var An=JSON.stringify;re(JSON,"stringify",function(e){if("symbol"!=typeof e){var t;arguments.length>1&&(t=arguments[1]);var o=[e];if(n(t))o.push(t);else{var i=ue.IsCallable(t)?t:null,a=function(e,t){var n=i?r(i,this,e,t):t;if("symbol"!=typeof n)return te.symbol(n)?Tt({})(n):n};o.push(a)}return arguments.length>2&&o.push(arguments[2]),An.apply(this,o)}})}return P});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(){function e(e){return document.querySelector(e)}var t={playerPlayState:null,isFullscreen:!1,controlPlay:null,progressBar:null,settingBtn:null,bulletScreen:null},r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getBrowserInfo",value:function(){var e=navigator.userAgent,t=void 0,r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{browser:"IE",version:t[1]||""}):"Chrome"===r[1]&&(t=e.match(/\b(OPR|Edge)\/(\d+)/))?{browser:"Opera",version:t.slice(1)[1]}:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))&&r.splice(1,1,t[1]),{browser:r[0],version:r[1]})}},{key:"isWhichBrowser",value:function(e){if(!e)throw new Error('param "browser" of method "isWhichBrowser" is not given!');var t=e.toLowerCase(),r=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,n="undefined"!=typeof InstallTrigger,o=!!document.documentMode,i=!o&&!!window.StyleMedia,a=!!window.chrome&&!!window.chrome.webstore,l=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification)||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||!a&&!r&&void 0!==window.webkitAudioContext,s={opera:r,firefox:n,safari:l,ie:o,edge:i,chrome:a};return s[t]}},{key:"addClass",value:function(e,t){if(!t)throw new Error('second param "element" of method "addClass" is not given!');var r=t.className?t.className+" ":"";t.className=""+r+e}},{key:"removeClass",value:function(e,t){if(!t)throw new Error('second param "element" of method "removeClass" is not given!');var r=t.className;r.includes(e)&&(t.className=r.slice(0,r.indexOf(""+e)-1))}},{key:"offset",value:function(e,t){if(!t)throw new Error('second param "element" of method "offset" is not given!');var r=e.left,n=e.top,o=t.parentNode;o.style.position=window.getComputedStyle(o).position||"relative",t.style.position="absolute",t.style.left=r+"px",t.style.top=n+"px"}},{key:"outerWidth",value:function(e){if(!e)throw new Error('param "element" of method "outerWidth" is not given!');return e.offsetWidth}},{key:"outerHeight",value:function(e){if(!e)throw new Error('param "element" of method "outerHeight" is not given!');return e.offsetHeight}},{key:"getOffsetLeft",value:function(e){if(!e)throw new Error('param "element" of method "getOffsetLeft" is not given!');return e.parentNode?e.getBoundingClientRect().left-e.parentNode.getBoundingClientRect().left:0}},{key:"getOffsetRight",value:function(e){if(!e)throw new Error('param "element" of method "getOffsetRight" is not given!');return e.parentNode?e.parentNode.getBoundingClientRect().right-e.getBoundingClientRect().right:0}},{key:"getOffsetTop",value:function(e){if(!e)throw new Error('param "element" of method "getOffsetTop" is not given!');return e.parentNode?e.getBoundingClientRect().top-e.parentNode.getBoundingClientRect().top:0}},{key:"getOffsetBottom",value:function(e){if(!e)throw new Error('param "element" of method "getOffsetBottom" is not given!');return e.parentNode?e.parentNode.getBoundingClientRect().bottom-e.getBoundingClientRect().bottom:0}},{key:"getPageX",value:function(e){if(!e)throw new Error('param "element" of method "getPageX" is not given!');var t=window.pageXOffset,r=e.getBoundingClientRect().left,n=t+r;return n}},{key:"getPageY",value:function(e){if(!e)throw new Error('param "element" of method "getPageY" is not given!');var t=window.pageYOffset,r=e.getBoundingClientRect().top,n=t+r;return n}}]),e}(),n=function(){function e(t){_classCallCheck(this,e),this.classObject=t}return _createClass(e,[{key:"buttonWasClicked",value:function(){throw new Error('method "buttonWasClicked" of super class must be overrided!')}}]),e}(),o=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buttonWasClicked",value:function(){this.classObject.pauseVideo()}}]),t}(n),i=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,e),_createClass(r,[{key:"buttonWasClicked",value:function(){this.classObject.pauseVideo(),t.bulletScreen.controlPauseBulletScreen()}}]),r}(n),a=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,e),_createClass(r,[{key:"buttonWasClicked",value:function(){this.classObject.playVideo(),t.bulletScreen.controlContinueBulletScreen()}}]),r}(n),l=function(r){function n(t){_classCallCheck(this,n);var r={abort:1,network:2,decode:3,support:4},o={network:"哎呀，网络好像出错了！\n刷新网页试一下:P",decode:"咦，视频解码错误，\n这一定不是我的锅，\n换其他视频看看:）",support:"天啦噜，视频不存在或者当前的浏览器不支持这个格式的视频:(，\n换其他视频看看"},i=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));
return i.mediaErrorCode=r,i.errorMessage=o,i.errDisplay=e(".YangPlayer-error-prompt"),i}return _inherits(n,r),_createClass(n,[{key:"buttonWasClicked",value:function(e){this.displayErrorMsg(e)}},{key:"displayErrorMsg",value:function(e){this.errDisplay.style.display="block",this.classObject.forbidEventBinding(),this.classObject.setErrorSign(),t.progressBar.progressDragButton.onmousedown=null,t.settingBtn.forbidEventBinding(),t.bulletScreen.forbidEventBinding(),window.clearInterval(t.progressBar.intervalId),window.clearInterval(t.bulletScreen.intervalId);for(var r in this.mediaErrorCode)this.mediaErrorCode[r]===e&&(this.errDisplay.innerHTML=this.errorMessage[r])}}]),n}(n),s=function(){function r(t){_classCallCheck(this,r);var n={empty:0,idle:1,loading:2,source:3};this.classObject=t,this.networkStateCode=n,this.errDisplay=e(".YangPlayer-error-prompt")}return _createClass(r,[{key:"sourceState",value:function(e){if(3===e){var r="哎呀，这个视频地址的资源好像不见了！\n刷新网页或者换其他视频看看";this.errDisplay.style.display="block",this.classObject.forbidEventBinding(),this.classObject.setErrorSign(),t.progressBar.progressDragButton.onmousedown=null,t.settingBtn.forbidEventBinding(),t.bulletScreen.forbidEventBinding(),window.clearInterval(t.progressBar.intervalId),window.clearInterval(t.bulletScreen.intervalId),this.errDisplay.innerHTML=r}}}]),r}(),u=function(){function e(t){_classCallCheck(this,e);var r={nothing:0,metadata:1,current:2,future:3,enough:4};this.classObject=t,this.readyStateCode=r}return _createClass(e,[{key:"toggleLoadingSign",value:function(e){return e<3?(this.classObject.setLoadingSign(),t.bulletScreen.ifPauseBulletScreen=!1,void t.bulletScreen.controlPauseBulletScreen()):void(e>=3&&(this.classObject.playVideo(),t.bulletScreen.controlContinueBulletScreen()))}}]),e}(),c=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buttonWasClicked",value:function(){this.classObject.muteVolume()}}]),t}(n),f=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buttonWasClicked",value:function(){this.classObject.normalVolume()}}]),t}(n),p=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buttonWasClicked",value:function(e){if(e){if("loop"===e)return void this.classObject.loopPlayOff();if("auto"===e)return void this.classObject.autoPlayOff();throw new Error('param "btnType" of method "buttonWasClicked" is incorrect!')}throw new Error('param "btnType" of method "buttonWasClicked" is not given!')}}]),t}(n),h=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buttonWasClicked",value:function(e){if(e){if("loop"===e)return void this.classObject.loopPlayOn();if("auto"===e)return void this.classObject.autoPlayOn();throw new Error('param "btnType" of method "buttonWasClicked" is incorrect!')}throw new Error('param "btnType" of method "buttonWasClicked" is not given!')}}]),t}(n),y=function(){function r(n){_classCallCheck(this,r),this.loadingState=new o(this),this.playingState=new i(this),this.pausingState=new a(this),this.playErrorState=new l(this),t.controlPlay=this,this.player=n,this.playerLayer=e(".YangPlayer-video-layer"),this.playButton=e(".YangPlayer-play-button"),this.pauseButton=e(".YangPlayer-pause-button"),this.playCircle=e(".YangPlayer-play-circle"),this.playLoading=e(".YangPlayer-loading"),this.controlPlayButton=e(".YangPlayer-controlPlay-button"),this.replayButton=e(".YangPlayer-replay"),this.playerState=t.playerPlayState,this.readyState=new u(this),this.networkState=new s(this)}return _createClass(r,[{key:"init",value:function(){var e=this;this.player.oncanplaythrough=function(){e.setPausingSign(),e.controlPlayButton.onclick=function(){e.playerState.buttonWasClicked()},e.playerLayer.onclick=function(){e.playerState.buttonWasClicked()},e.playCircle.onclick=function(){e.playerState.buttonWasClicked()},e.player.oncanplaythrough=null}}},{key:"listenError",value:function(){if(this.player.error){var e=this.player.error.code;if(1===e)return;this.setErrorSign(),this.playerState.buttonWasClicked(e)}}},{key:"listenReadyState",value:function(){if(!this.player.paused){var e=this.player.readyState;this.readyState.toggleLoadingSign(e)}}},{key:"listenNetwork",value:function(){var e=this.player.networkState;this.networkState.sourceState(e)}},{key:"listenAll",value:function(){this.listenReadyState(),this.listenError(),this.listenNetwork()}},{key:"forbidEventBinding",value:function(){this.controlPlayButton.onclick=null,this.playerLayer.onclick=null,this.playCircle.onclick=null,document.onkeydown=null}},{key:"setErrorSign",value:function(){this.playLoading.style.display="none",this.player.style.opacity=0,this.playCircle.style.display="none",this.pauseButton.style.display="none",this.playButton.style.display="inline-block",this.setState(this.playErrorState)}},{key:"setLoadingSign",value:function(){this.playLoading.style.display="block",this.player.style.opacity=.5,this.playCircle.style.display="none",this.pauseButton.style.display="inline-block",this.playButton.style.display="none",this.setState(this.loadingState)}},{key:"setPausingSign",value:function(){this.playLoading.style.display="none",this.player.style.opacity=.5,this.playCircle.style.display="block",this.pauseButton.style.display="none",this.playButton.style.display="inline-block",this.setState(this.pausingState)}},{key:"setPlayingSign",value:function(){this.playLoading.style.display="none",this.replayButton.style.display="none",this.playButton.style.display="none",this.pauseButton.style.display="inline-block",this.player.style.opacity=1,this.playCircle.style.display="none",this.setState(this.playingState)}},{key:"setReplayPausingSign",value:function(){this.playLoading.style.display="none",this.player.style.opacity=.5,this.playCircle.style.display="none",this.replayButton.style.display="block",this.playButton.style.display="inline-block",this.pauseButton.style.display="none",this.setState(this.pausingState),t.bulletScreen.ifPauseBulletScreen=!1,t.bulletScreen.controlPauseBulletScreen()}},{key:"replayVideo",value:function(){this.player.load(),t.progressBar.progressDragButton.style.left=0,t.progressBar.progressPlayedbarDisplay(),this.playVideo();for(var e in t.bulletScreen.userIdCollection)t.bulletScreen.userIdCollection[e].parentNode.removeChild(t.bulletScreen.userIdCollection[e]),window.clearTimeout(t.bulletScreen.userIdCollection[e]),delete t.bulletScreen.userIdCollection[e],delete t.bulletScreen.userIdCollection[e]}},{key:"setReplayEventBinding",value:function(){var e=this;this.setReplayPausingSign(),this.controlPlayButton.onclick=function(){e.replayVideo(t.progressBar),e.restoreDefaultBinding()},this.replayButton.onclick=function(){e.replayVideo(t.progressBar),e.restoreDefaultBinding()},this.playerLayer.onclick=function(){e.replayVideo(t.progressBar),e.restoreDefaultBinding()},t.isFullscreen&&(document.onkeydown=function(r){var n=r.key||r.keyCode;" "!==n&&32!==n||(e.replayVideo(t.progressBar),e.restoreDefaultBinding())})}},{key:"restoreDefaultBinding",value:function(){var e=this;this.controlPlayButton.onclick=function(){e.playerState.buttonWasClicked()},this.replayButton.onclick=null,this.playerLayer.onclick=function(){e.playerState.buttonWasClicked()},t.isFullscreen&&(document.onkeydown=function(t){var r=t.key||t.keyCode;" "!==r&&32!==r||e.playerState.buttonWasClicked()})}},{key:"playVideo",value:function(){var e="AbortError: The play() request was interrupted by a call to pause().";this.setPlayingSign();var t=this.player.play();t.catch(function(t){return t.toString()===e?void console.log("Abort `play` promise."):void console.log(t)})}},{key:"pauseVideo",value:function(){this.setPausingSign(),this.player.pause()}},{key:"setState",value:function(e){t.playerPlayState=e,this.playerState=e}}]),r}(),d=function(){function t(r){_classCallCheck(this,t);var n=50,o=.5,i=28,a=56;this.normalVolumeState=new c(this),this.muteVolumeState=new f(this),this.player=r,this.volumeButton=e(".YangPlayer-volume-button"),this.volumeUpButton=e(".YangPlayer-volume-up"),this.volumeDownButton=e(".YangPlayer-volume-down"),this.volumeOffButton=e(".YangPlayer-volume-off"),this.volumeChangeRect=e(".YangPlayer-volume-change"),this.volumeNumber=e(".YangPlayer-volume-number"),this.midVolumeBarH=i,this.volumeNumberValue=n,this.realVolumeValue=o,this.volumeBar=e(".YangPlayer-volume-bar"),this.volumeDragButton=e(".YangPlayer-volume-dragButton"),this.currentVolumeReverseBar=e(".YangPlayer-currentVolume-reverseBar"),this.currentVolumeBarH=i,this.mouseYMax=a,this.volumeState=null,this.mousedownFired=!1}return _createClass(t,[{key:"init",value:function(){var e=this;this.setState(this.normalVolumeState),this.displayVolumeButton(),this.normalVolume(),this.controlVolumeButton(),this.volumeButton.onclick=function(){return e.mousedownFired?void(e.mousedownFired=!1):void e.volumeState.buttonWasClicked()},this.volumeChangeRect.onclick=function(){e.mousedownFired=!0}}},{key:"controlVolumeButton",value:function(t){var n=this,o=r.getOffsetLeft(this.volumeDragButton);return t?(r.offset({top:t,left:o},this.volumeDragButton),void(this.currentVolumeReverseBar.style.height=r.getOffsetTop(this.volumeDragButton)/r.outerHeight(this.volumeBar)*100+"%")):void(this.volumeDragButton.onmousedown=function(t){n.mousedownFired=!0,r.addClass("draggable",n.volumeDragButton),n.volumeDragButton.onmousemove=function(t){var i=t.pageY-r.outerHeight(n.volumeDragButton)/2-r.getPageY(n.volumeBar),a=i<=0?0:i>=n.mouseYMax?n.mouseYMax:i;r.offset({top:a,left:o},e(".draggable")),n.currentVolumeReverseBar.style.height=r.getOffsetTop(n.volumeDragButton)/r.outerHeight(n.volumeBar)*100+"%",n.currentVolumeBarH=r.outerHeight(n.volumeBar)-a-r.outerHeight(n.volumeDragButton),n.changeVolume(n.currentVolumeBarH),t.preventDefault()},n.volumeDragButton.onmouseup=function(e){r.removeClass("draggable",n.volumeDragButton),n.volumeDragButton.onmousemove=null,e.preventDefault()},n.volumeDragButton.onmouseout=function(e){r.removeClass("draggable",n.volumeDragButton),n.volumeDragButton.onmousemove=null,e.preventDefault()},t.preventDefault()})}},{key:"changeVolume",value:function(e){this.volumeNumberValue=Number.parseInt(e/this.mouseYMax*100),this.realVolumeValue=(e/this.mouseYMax).toFixed(2),this.volumeNumber.innerHTML=this.volumeNumberValue,this.player.volume=this.realVolumeValue}},{key:"displayVolumeButton",value:function(e){var t=this;if(e){if("normal"===e)return void this.displayWhichVolumeBtn("up");if("mute"===e)return void this.displayWhichVolumeBtn("off")}this.volumeButton.onmouseover=function(){t.volumeChangeRect.style.opacity=1,t.volumeChangeRect.style.visibility="visible",t.volumeButton.style.backgroundColor="#ccc",t.volumeChangeRect.onmousemove=function(){return 0===t.volumeNumberValue?void t.displayWhichVolumeBtn("off"):t.volumeNumberValue>0&&t.volumeNumberValue<50?void t.displayWhichVolumeBtn("down"):void t.displayWhichVolumeBtn("up")}},this.volumeButton.onmouseout=function(){t.volumeChangeRect.style.opacity=0,t.volumeChangeRect.style.visibility="hidden",t.volumeButton.style.backgroundColor="#eee"}}},{key:"displayWhichVolumeBtn",value:function(e){this.volumeDownButton.style.display="none",this.volumeUpButton.style.display="none",this.volumeOffButton.style.display="none","down"===e?this.volumeDownButton.style.display="inline-block":"up"===e?this.volumeUpButton.style.display="inline-block":"off"===e&&(this.volumeOffButton.style.display="inline-block")}},{key:"normalVolume",value:function(){this.changeVolume(this.midVolumeBarH),this.controlVolumeButton(this.midVolumeBarH),this.displayVolumeButton("normal"),this.setState(this.normalVolumeState)}},{key:"muteVolume",value:function(){this.changeVolume(0),this.controlVolumeButton(this.mouseYMax),this.displayVolumeButton("mute"),this.setState(this.muteVolumeState)}},{key:"setState",value:function(e){this.volumeState=e}}]),t}(),v=function(){function n(o){var i=this;_classCallCheck(this,n),t.progressBar=this,this.player=o,this.intervalId=null,this.intervalFunc=null,this.progressBar=e(".YangPlayer-progress"),this.progressPlayedbar=e(".YangPlayer-playedbar"),this.progressBufferedbar=e(".YangPlayer-bufferedbar"),this.playedTime=e(".YangPlayer-played-time"),this.totalTime=e(".YangPlayer-total-time"),this.progressDragButton=e(".YangPlayer-progress-dragButton"),this.mouseXMax=function(){return r.outerWidth(i.progressBar)-r.outerWidth(i.progressDragButton)}}return _createClass(n,[{key:"init",value:function(){n.setProgressLength(),this.progressPlayedbarDisplay(),this.controlProgressButton()}},{key:"controlProgressButton",value:function(n){var o=this,i=r.getOffsetTop(this.progressDragButton);return n?(r.offset({top:i,left:n},this.progressDragButton),void(this.progressPlayedbar.style.width=r.getOffsetLeft(this.progressDragButton)/r.outerWidth(this.progressBar)*100+"%")):void(this.progressDragButton.onmousedown=function(n){r.addClass("draggable",o.progressDragButton),o.progressDragButton.onmousemove=function(n){var a=n.pageX-r.outerWidth(o.progressDragButton)/2-r.getPageX(o.progressBar),l=a<=0?0:a>=o.mouseXMax()?o.mouseXMax():a;r.offset({top:i,left:l},e(".draggable")),o.progressPlayedbar.style.width=r.getOffsetLeft(o.progressDragButton)/r.outerWidth(o.progressBar)*100+"%",o.player.paused&&(t.controlPlay.playVideo(),o.intervalId=window.setInterval(o.intervalFunc,1e3)),t.bulletScreen.removeAllBulletScreen(),o.player.currentTime=r.getOffsetLeft(o.progressDragButton)*o.player.duration/o.mouseXMax(),n.preventDefault()},o.progressDragButton.onmouseup=function(e){r.removeClass("draggable",o.progressDragButton),o.progressDragButton.onmousemove=null,!t.bulletScreen.intervalId&&t.bulletScreen.bulletScreenState&&(t.bulletScreen.intervalId=window.setInterval(t.bulletScreen.intervalFunc,1e3)),e.preventDefault()},o.progressDragButton.onmouseout=function(e){r.removeClass("draggable",o.progressDragButton),o.progressDragButton.onmousemove=null,!t.bulletScreen.intervalId&&t.bulletScreen.bulletScreenState&&(t.bulletScreen.intervalId=window.setInterval(t.bulletScreen.intervalFunc,1e3)),e.preventDefault()},n.preventDefault()})}},{key:"progressPlayedbarDisplay",value:function(){var e=this;this.player.currentTime=0,this.progressPlayedbar.style.width=0,this.progressBufferedbar.style.width=0,this.intervalFunc=function(){if(e.player.duration>0){var r=Math.floor(e.player.currentTime/e.player.duration*100)+"%",n=e.player.currentTime*e.mouseXMax()/e.player.duration;e.progressPlayedbar.style.display="block",e.progressPlayedbar.style.width=r,e.progressTimeDisplay(e.player.currentTime,e.player.duration),e.controlProgressButton(n)}t.controlPlay.listenAll(),e.player.ended&&(t.controlPlay.setReplayEventBinding(),window.clearInterval(e.intervalId)),e.progressBufferedDisplay()},this.intervalId=window.setInterval(this.intervalFunc,1e3)}},{key:"progressBufferedDisplay",value:function(){if(this.player.buffered.length>0){var e=Math.floor(this.player.buffered.end(0)/this.player.duration*100)+"%";this.progressBufferedbar.style.display="block",this.progressBufferedbar.style.width=e}}},{key:"progressTimeDisplay",value:function(e,t){var r=void 0,n=void 0,o=void 0,i=void 0,a=void 0,l=void 0,s=(i=Math.floor(e/3600))<10?"0"+i:i,u=(a=Math.floor(e%3600/60))<10?"0"+a:a,c=(l=Math.floor(e%3600%60))<10?"0"+l:l,f=(r=Math.floor(t/3600))<10?"0"+r:r,p=(n=Math.floor(t%3600/60))<10?"0"+n:n,h=(o=Math.floor(t%3600%60))<10?"0"+o:o;this.playedTime.innerHTML=s+":"+u+":"+c,this.totalTime.innerHTML=f+":"+p+":"+h}}],[{key:"setProgressLength",value:function(){var t=r.isWhichBrowser("Safari")&&document.webkitIsFullScreen?window.innerWidth:r.outerWidth(e("#YangPlayer")),n=r.outerWidth(e(".YangPlayer-controlPlay-button")),o=r.outerWidth(e(".YangPlayer-time")),i=r.outerWidth(e(".YangPlayer-volume-button")),a=r.outerWidth(e(".YangPlayer-screen-mode")),l=r.outerWidth(e(".YangPlayer-setting-button")),s=t-n-o-i-a-l-30;e(".YangPlayer-progress").style.width=s/t*100+"%"}}]),n}(),g=function(){function r(n){_classCallCheck(this,r);var o=[.5,1,1.5,2,4];this.switchOnState=new p(this),this.switchOffState=new h(this),t.settingBtn=this,this.player=n,this.settingBtn=e(".YangPlayer-setting-button"),this.settingPane=e(".YangPlayer-setting-pane"),this.loopSwitch=e(".YangPlayer-loop-switch"),this.loopSwitchOn=e(".YangPlayer-loop-on"),this.loopSwitchOff=e(".YangPlayer-loop-off"),this.autoSwitch=e(".YangPlayer-auto-switch"),this.autoSwitchOn=e(".YangPlayer-auto-on"),this.autoSwitchOff=e(".YangPlayer-auto-off"),this.rateBtn=e(".YangPlayer-rate-btn"),this.rate=o,this.loopState=null,this.autoState=null}return _createClass(r,[{key:"init",value:function(){var e=this;this.setSwitchState(this.switchOffState,"loop"),this.setSwitchState(this.switchOffState,"auto"),this.displaySettingBtn(),this.loopSwitch.onclick=function(){e.loopState.buttonWasClicked("loop")},this.autoSwitch.onclick=function(){e.autoState.buttonWasClicked("auto")},this.controlPlayRate()}},{key:"forbidEventBinding",value:function(){this.loopSwitch.onclick=null,this.autoSwitch.onclick=null}},{key:"displaySettingBtn",value:function(){var e=this;this.settingBtn.onmouseover=function(){e.settingPane.style.opacity=1,e.settingPane.style.visibility="visible",e.settingBtn.style.backgroundColor="#ccc"},this.settingBtn.onmouseout=function(){e.settingPane.style.opacity=0,e.settingPane.style.visibility="hidden",e.settingBtn.style.backgroundColor="#eee"}}},{key:"controlPlayRate",value:function(){for(var e=this,t=function(t){e.rateBtn.children[t].onclick=function(){for(var r=0;r<e.rateBtn.children.length;r++)e.rateBtn.children[r].style.opacity=.4;e.rateBtn.children[t].style.opacity=1,e.setPlayRate(e.rate[t])}},r=0;r<this.rateBtn.children.length;r++)t(r)}},{key:"loopPlayOn",value:function(){this.loopSwitchOff.style.display="none",this.loopSwitchOn.style.display="inline-block",this.player.loop=!0,this.setSwitchState(this.switchOnState,"loop")}},{key:"loopPlayOff",value:function(){this.loopSwitchOff.style.display="inline-block",this.loopSwitchOn.style.display="none",this.player.loop=!1,this.setSwitchState(this.switchOffState,"loop")}},{key:"autoPlayOn",value:function(){this.autoSwitchOff.style.display="none",this.autoSwitchOn.style.display="inline-block",this.player.autoplay=!0,this.setSwitchState(this.switchOnState,"auto"),this.player.paused&&(t.controlPlay.playVideo(),t.bulletScreen.controlContinueBulletScreen())}},{key:"autoPlayOff",value:function(){this.autoSwitchOff.style.display="inline-block",this.autoSwitchOn.style.display="none",this.player.autoplay=!1,this.setSwitchState(this.switchOffState,"auto")}},{key:"setPlayRate",value:function(e){this.player.playbackRate=e}},{key:"setSwitchState",value:function(e,t){if(t){if("loop"===t)return void(this.loopState=e);if("auto"===t)return void(this.autoState=e);throw new Error('second param "switchType" of method "setSwitchState" is incorrect!')}throw new Error('second param "switchType" of method "setSwitchState" is not given!')}}]),r}(),b=function(){function r(t){_classCallCheck(this,r),this.player=t,this.playerContainer=e(".YangPlayer-container"),this.controlBar=e(".YangPlayer-control"),this.controlBarBox=e(".YangPlayer-control-box"),this.screenModeButton=e(".YangPlayer-screen-mode"),this.fullscreenButton=e(".YangPlayer-fullscreen"),this.minscreenButton=e(".YangPlayer-minscreen"),this.fullscreenElement=null,this.isFullscreen=!1,this.fullscreenEnabled=!1}return _createClass(r,[{key:"init",value:function(){var e=this;if(r.getBrowserSupportObj())return this.fullscreenElement=function(){return document[r.getBrowserSupportObj().fullscreenElement]},this.isFullscreen=function(){return t.isFullscreen=Boolean(e.fullscreenElement()),t.isFullscreen},this.fullscreenEnabled=function(){return document[r.getBrowserSupportObj().fullscreenEnabled]},void(this.screenModeButton.onclick=function(){var t=document.mozCancelFullScreen?e.playerContainer:e.player;e.toggle(t),e.onfullscreenchange(v.setProgressLength),window.onresize=v.setProgressLength});throw new Error("Current browser doesn't support Fullscreen API!")}},{key:"onfullscreenchange",value:function(e){var n=this;if(r.getBrowserSupportObj()){var o=r.getBrowserSupportObj().onfullscreenchange,i=function(){e(),n.isFullscreen()?document.onkeydown=function(e){var r=e.key||e.keyCode;" "!==r&&32!==r||t.playerPlayState.buttonWasClicked()}:document.onkeydown=null,n.notOverControlBar();for(var r in t.bulletScreen.userIdCollection)if(!n.player.paused){t.bulletScreen.ifPauseBulletScreen=!0,t.bulletScreen.controlContinueBulletScreen();break}};return document[o]=i}throw new Error("Current browser doesn't support Fullscreen API!")}},{key:"notOverControlBar",value:function(){var e=this;this.isFullscreen()?(this.fullscreenButton.style.display="none",this.minscreenButton.style.display="inline-block",this.controlBar.style.transition="all 0.5s linear",this.controlBar.onmouseleave=function(){e.controlBar.style.opacity=0,e.controlBar.style.visibility="hidden"},this.controlBarBox.onmouseenter=function(){e.controlBar.style.opacity=1,e.controlBar.style.visibility="visible"}):(this.fullscreenButton.style.display="inline-block",this.minscreenButton.style.display="none",this.controlBarBox.onmouseenter=null,this.controlBar.onmouseleave=null,this.controlBar.style.transition="none",this.controlBar.style.opacity=1,this.controlBar.style.visibility="visible")}},{key:"requestFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;if(r.getBrowserSupportObj()){var t=r.getBrowserSupportObj().requestFullscreen;return this.fullscreenButton.style.display="none",this.minscreenButton.style.display="inline-block",e[t]()}throw new Error("Current browser doesn't support Fullscreen API!")}},{key:"exitFullscreen",value:function(){if(r.getBrowserSupportObj()){var e=r.getBrowserSupportObj().exitFullscreen;return this.fullscreenButton.style.display="inline-block",this.minscreenButton.style.display="none",document[e]()}throw new Error("Current browser doesn't support Fullscreen API!")}},{key:"toggle",value:function(e){return this.isFullscreen()?this.exitFullscreen():this.requestFullscreen(e)}}],[{key:"getBrowserSupportObj",value:function(){for(var e=[["requestFullscreen","exitFullscreen","onfullscreenerror","onfullscreenchange","fullscreenElement","fullscreenEnabled","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","onwebkitfullscreenerror","onwebkitfullscreenchange","webkitFullscreenElement","webkitFullscreenEnabled","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","onmozfullscreenerror","onmozfullscreenchange","mozFullScreenElement","mozFullScreenEnabled","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","onmsfullscreenerror","onmsfullscreenchange","msFullscreenElement","msFullscreenEnabled",null]],t={},r=0;r<e.length;r++){var n=e[r];if(n[1]in document){for(var o=0;o<n.length;o++)t[e[0][o]]=n[o];return t}}return!1}}]),r}(),m=function(){function n(r){_classCallCheck(this,n);var o=["1em","1.5em","2em"],i=["top","move"],a=5/984,l=37;t.bulletScreen=this,this.player=r,this.intervalId=null,this.intervalFunc=null,this.bulletScreenPool=e(".YangPlayer-bulletScreen-pool"),this.bulletScrenRect=e(".YangPlayer-bullet-screen"),this.colorBox=e(".YangPlayer-color-box"),this.colorPane=e(".YangPlayer-color-pane"),this.colorValue=e(".YangPlayer-color-value"),this.slider=e("#slider"),this.picker=e("#picker"),this.modePane=e(".YangPlayer-mode-pane"),this.bulletScreenText=e(".YangPlayer-bulletScreen-text"),this.bulletScreenSend=e(".YangPlayer-bulletScreen-send"),this.bulletScreenColor=e(".YangPlayer-bulletScreen-color"),this.bulletScreenMode=e(".YangPlayer-bulletScreen-mode"),this.bulletScreenSwitch=e(".YangPlayer-bulletScreen-switch"),this.bulletScreenOn=e(".YangPlayer-bulletScreen-on"),this.bulletScreenOff=e(".YangPlayer-bulletScreen-off"),this.turnOffLight=e(".YangPlayer-turnOff-light"),this.fontSize=o,this.bulletScreenStyle=i,this.transitionRateScale=a,this.baseAddHeight=l,this.sendData={url:null,userId:"",fontSize:"1.5em",mode:"move",color:"#fff",message:"",playTime:0,date:""},this.timeoutIdCollection={},this.timeoutId=null,this.userIdCollection={},this.ifPauseBulletScreen=!1,this.playTimeCollection=new Map,this.bulletScreenState=!0,this.light=!0}return _createClass(n,[{key:"init",value:function(e){this.setUrl(e),this.setColorPicker(),this.setModePane(),this.ajax(this.sendData),this.sendBulletScreen(),this.controlBulletScreenSwitch(),this.controlLight()}},{key:"controlLight",value:function(){var t=this;this.turnOffLight.onclick=function(){t.light?(t.light=!1,document.body.style.backgroundColor="#000",e(".YangPlayer-container").style.boxShadow="0 0 5px #fff"):(t.light=!0,document.body.style.backgroundColor="inherit",e(".YangPlayer-container").style.boxShadow="none")}}},{key:"controlBulletScreenSwitch",value:function(){var e=this;this.bulletScreenOn.onclick=function(){e.bulletScreenOn.style.display="none",e.bulletScreenOff.style.display="inline-block",e.openBulletScreen(),e.bulletScreenState=!0},this.bulletScreenOff.onclick=function(){e.bulletScreenOn.style.display="inline-block",e.bulletScreenOff.style.display="none",e.closeBulletScreen(),e.bulletScreenState=!1}}},{key:"closeBulletScreen",value:function(){this.removeAllBulletScreen(),this.bulletScreenSend.onclick=null}},{key:"openBulletScreen",value:function(){this.setMessage(""),this.ajax(this.sendData),this.sendBulletScreen()}},{key:"forbidEventBinding",value:function(){this.bulletScreenSend.onclick=null,this.bulletScreenOn.onclick=null,this.bulletScreenOff.onclick=null}},{key:"setColorPicker",value:function(){var e=this;this.bulletScreenColor.onmouseover=function(){e.colorBox.style.visibility="visible",e.colorBox.style.opacity="1"},this.bulletScreenColor.onmouseout=function(){e.colorBox.style.visibility="hidden",e.colorBox.style.opacity="0"},this.colorValue.value="fff",ColorPicker(this.slider,this.picker,function(t){e.colorValue.value=t.match(/#([0-9a-zA-Z]+)/)[1],e.colorPane.style.backgroundColor=t,e.setColor(t)}),this.colorValue.oninput=function(){var t="#"+e.colorValue.value.match(/([0-9a-zA-Z]+)/)[1];e.colorPane.style.backgroundColor=t,e.setColor(t)}}},{key:"setModePane",value:function(){var e=this;this.bulletScreenMode.onmouseover=function(){e.modePane.style.visibility="visible",e.modePane.style.opacity="1"},this.bulletScreenMode.onmouseout=function(){e.modePane.style.visibility="hidden",e.modePane.style.opacity="0"},this.setFontSize(),this.setMode()}},{key:"renderTopBulletScreen",value:function(e){var t=this;r.addClass("YangPlayer-bulletScreen-top",e),this.bulletScreenPool.append(e),e.style.marginLeft="-"+r.outerWidth(e)/2+"px",this.player.paused||(this.timeoutId=window.setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e);for(var r in t.userIdCollection)if(r===e.getAttribute("data-id")){delete t.userIdCollection[r],delete t.timeoutIdCollection[r];break}},4e3),this.timeoutIdCollection[e.getAttribute("data-id")]=this.timeoutId)}},{key:"controlPauseBulletScreen",value:function(){for(var e in this.timeoutIdCollection)window.clearTimeout(this.timeoutIdCollection[e]),delete this.timeoutIdCollection[e];if(!this.ifPauseBulletScreen)for(var t in this.userIdCollection)this.ifPauseBulletScreen=!0,"YangPlayer-bulletScreen-move"===this.userIdCollection[t].className&&(this.userIdCollection[t].style.transition="transform 0s linear",this.userIdCollection[t].style.transform="translateX(-"+(r.outerWidth(this.userIdCollection[t])+r.getOffsetRight(this.userIdCollection[t]))+"px)")}},{key:"controlContinueBulletScreen",value:function(){var e=this;if(this.ifPauseBulletScreen){var t=function(t){if(e.ifPauseBulletScreen=!1,"YangPlayer-bulletScreen-move"===e.userIdCollection[t].className&&(e.userIdCollection[t].style.transition="transform "+(r.outerWidth(e.bulletScreenPool)-r.getOffsetRight(e.userIdCollection[t]))*e.transitionRateScale+"s linear",e.userIdCollection[t].style.transform="translateX(-"+(r.outerWidth(e.bulletScreenPool)+r.outerWidth(e.userIdCollection[t]))+"px)"),"YangPlayer-bulletScreen-top"===e.userIdCollection[t].className){var n=function(){e.userIdCollection[t]&&e.userIdCollection[t].parentNode.removeChild(e.userIdCollection[t]),delete e.userIdCollection[t],delete e.timeoutIdCollection[t]};e.timeoutId=window.setTimeout(n,2e3),e.timeoutIdCollection[t]=e.timeoutId}};for(var n in this.userIdCollection)t(n)}}},{key:"removeMovingBulletScreen",value:function(){for(var e in this.userIdCollection){var t="YangPlayer-bulletScreen-move"===this.userIdCollection[e].className&&r.getOffsetRight(this.userIdCollection[e])>=r.outerWidth(this.bulletScreenPool);t&&(this.userIdCollection[e].parentNode.removeChild(this.userIdCollection[e]),delete this.userIdCollection[e])}}},{key:"removeAllBulletScreen",value:function(){window.clearInterval(this.intervalId),this.intervalId=null;for(var e in this.userIdCollection)this.userIdCollection[e].parentNode.removeChild(this.userIdCollection[e]),window.clearTimeout(this.timeoutIdCollection[e]),delete this.userIdCollection[e],delete this.timeoutIdCollection[e]}},{key:"renderMovingBulletScreen",value:function(e){r.addClass("YangPlayer-bulletScreen-move",e),this.bulletScreenPool.append(e),e.style.right="-"+r.outerWidth(e)+"px",this.player.paused||(e.style.transition="transform "+(r.outerWidth(this.bulletScreenPool)+r.outerWidth(e))*this.transitionRateScale+"s linear",e.style.transform="translateX(-"+(r.outerWidth(this.bulletScreenPool)+r.outerWidth(e))+"px)")}},{key:"renderBulletScreen",value:function(e){var t=this;this.intervalFunc=function(){for(var n=0;n<e.length;n++){var o=Number.parseInt(e[n].playTime),i=Number.parseInt(t.player.currentTime),a=e[n].userId,l=o===i&&!t.player.paused&&!t.userIdCollection.hasOwnProperty(a);if(l){var s=e[n].fontSize,u=e[n].mode,c=e[n].color,f=e[n].message,p=document.createElement("div"),h=document.createTextNode(f);p.appendChild(h),p.style.fontSize=s,p.style.color=c,p.setAttribute("data-id",a),t.userIdCollection[a]=p,t.playTimeCollection.set(a,{mode:u,playTime:o}),"top"===u&&t.renderTopBulletScreen(p),"move"===u&&t.renderMovingBulletScreen(p);for(var y=0;y<n;y++){var d=Number.parseInt(e[y].playTime),v=e[y].mode;d===i&&v===u&&(p.style.top=r.getOffsetTop(p)+t.baseAddHeight+"px")}}}t.removeMovingBulletScreen()},this.bulletScreenState&&(this.intervalId=this.intervalId?window.clearInterval(this.intervalId)&&window.setInterval(this.intervalFunc,1e3):window.setInterval(this.intervalFunc,1e3))}},{key:"failSend",value:function(){console.log("sending bullet screens fail.")}},{key:"sendBulletScreen",value:function(){var e=this;this.bulletScreenSend.onclick=function(){var t=e.bulletScreenText.value.trim(),r=(new Date).toLocaleString();t&&(e.setMessage(t),e.setPlayTime(e.player.currentTime),e.setDate(r),e.setUserId(),e.firstSendRender(e.sendData),e.ajax(e.sendData,e.renderBulletScreen,e.failSend))}}},{key:"firstSendRender",value:function(e){this.bulletScreenText.value="";var t=e.userId,n=e.fontSize,o=e.mode,i=e.color,a=e.message,l=e.playTime,s=document.createElement("div"),u=document.createTextNode(a);s.appendChild(u),s.style.fontSize=n,s.style.color=i,s.style.border="1px solid #fff",s.style.padding="1px",s.setAttribute("data-id",t),this.userIdCollection[t]=s,"top"===o&&this.renderTopBulletScreen(s),"move"===o&&this.renderMovingBulletScreen(s);var c=!0,f=!1,p=void 0;try{for(var h,y=this.playTimeCollection.values()[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var d=h.value;d.mode===o&&d.playTime===l&&(s.style.top=r.getOffsetTop(s)+this.baseAddHeight+"px")}}catch(e){f=!0,p=e}finally{try{!c&&y.return&&y.return()}finally{if(f)throw p}}this.player.paused&&(this.ifPauseBulletScreen=!0)}},{key:"setUrl",value:function(e){
this.sendData.url=e}},{key:"setFontSize",value:function(){for(var t=this,r=e(".YangPlayer-font-btn"),n=function(e){r.children[e].onclick=function(){for(var n=0;n<r.children.length;n++)r.children[n].style.opacity=.4;r.children[e].style.opacity=1,t.sendData.fontSize=t.fontSize[e]}},o=0;o<r.children.length;o++)n(o)}},{key:"setUserId",value:function(){this.sendData.userId=String(Date.now())}},{key:"setMode",value:function(){for(var t=this,r=e(".YangPlayer-style-btn"),n=function(e){r.children[e].onclick=function(){for(var n=0;n<r.children.length;n++)r.children[n].style.opacity=.4;r.children[e].style.opacity=1,t.sendData.mode=t.bulletScreenStyle[e]}},o=0;o<r.children.length;o++)n(o)}},{key:"setColor",value:function(e){this.sendData.color=e}},{key:"setMessage",value:function(e){this.sendData.message=e}},{key:"setPlayTime",value:function(e){this.sendData.playTime=Number.parseInt(e)}},{key:"setDate",value:function(e){this.sendData.date=e}},{key:"ajax",value:function(e){var t=this,r=new XMLHttpRequest,n=e.url;if(e.fontSize&&e.userId&&e.mode&&e.color&&e.message&&e.date){var o=new FormData;o.append("fontSize",e.fontSize),o.append("userId",e.userId),o.append("mode",e.mode),o.append("color",e.color),o.append("message",e.message),o.append("playTime",e.playTime),o.append("date",e.date),r.open("post",n,!0),r.send(o)}else r.open("get",n,!0),r.send();r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText);e.sendSuccess?t.renderBulletScreen(e.bulletScreenContent):t.failSend()}}}}]),n}(),w=function(){function t(){_classCallCheck(this,t),this.YangPlayer=e("#YangPlayer"),this.controlPlay=null,this.progressBar=null,this.volumeButton=null,this.settingButton=null,this.screenMode=null,this.bulletScreen=null}return _createClass(t,[{key:"init",value:function(){this.controlPlay=new y(this.YangPlayer),this.controlPlay.init(),this.progressBar=new v(this.YangPlayer),this.progressBar.init(),this.volumeButton=new d(this.YangPlayer),this.volumeButton.init(),this.settingButton=new g(this.YangPlayer),this.settingButton.init(),this.screenMode=new b(this.YangPlayer),this.screenMode.init(),this.bulletScreen=new m(this.YangPlayer),this.bulletScreen.init("http://localhost/~yangshao/bulletScreen.php")}}]),t}(),S=new w;S.init()}();